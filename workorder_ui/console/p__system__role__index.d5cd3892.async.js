"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3024],{31199:function(k,F,e){var R=e(1413),s=e(44925),g=e(85893),a=e(67294),Z=e(99960),m=["fieldProps","min","proFieldProps","max"],O=function(M,w){var d=M.fieldProps,_=M.min,P=M.proFieldProps,c=M.max,t=(0,s.Z)(M,m);return(0,g.jsx)(Z.Z,(0,R.Z)({valueType:"digit",fieldProps:(0,R.Z)({min:_,max:c},d),ref:w,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:P},t))};F.Z=a.forwardRef(O)},86615:function(k,F,e){var R=e(6495),s=e(47933),g=e(1413),a=e(44925),Z=e(85893),m=e(22270),O=e(67294),v=e(64893),M=e(99960),w=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],d=O.forwardRef(function(t,B){var x=t.fieldProps,n=t.options,l=t.radioType,p=t.layout,o=t.proFieldProps,f=t.valueEnum,$=(0,a.Z)(t,w);return(0,Z.jsx)(M.Z,(0,g.Z)((0,g.Z)({valueType:l==="button"?"radioButton":"radio",ref:B,valueEnum:(0,m.h)(f,void 0)},$),{},{fieldProps:(0,g.Z)({options:n,layout:p},x),proFieldProps:o,filedConfig:{customLightMode:!0}}))}),_=O.forwardRef(function(t,B){var x=t.fieldProps,n=t.children;return(0,Z.jsx)(s.ZP,(0,g.Z)((0,g.Z)({},x),{},{ref:B,children:n}))}),P=(0,v.G)(_,{valuePropName:"checked",ignoreWidth:!0}),c=P;c.Group=d,c.Button=s.ZP.Button,c.displayName="ProFormComponent",F.Z=c},90672:function(k,F,e){var R=e(1413),s=e(44925),g=e(85893),a=e(67294),Z=e(99960),m=["fieldProps","proFieldProps"],O=function(M,w){var d=M.fieldProps,_=M.proFieldProps,P=(0,s.Z)(M,m);return(0,g.jsx)(Z.Z,(0,R.Z)({ref:w,valueType:"textarea",fieldProps:d,proFieldProps:_},P))};F.Z=a.forwardRef(O)},5966:function(k,F,e){var R=e(1413),s=e(44925),g=e(85893),a=e(99960),Z=["fieldProps","proFieldProps"],m=["fieldProps","proFieldProps"],O="text",v=function(_){var P=_.fieldProps,c=_.proFieldProps,t=(0,s.Z)(_,Z);return(0,g.jsx)(a.Z,(0,R.Z)({valueType:O,fieldProps:P,filedConfig:{valueType:O},proFieldProps:c},t))},M=function(_){var P=_.fieldProps,c=_.proFieldProps,t=(0,s.Z)(_,m);return(0,g.jsx)(a.Z,(0,R.Z)({valueType:"password",fieldProps:P,proFieldProps:c,filedConfig:{valueType:O}},t))},w=v;w.Password=M,w.displayName="ProFormComponent",F.Z=w},68137:function(k,F,e){var R=e(88601),s=e(85893),g=function(Z){return(0,s.jsx)(R._z,{content:Z.children})};F.Z=g},33936:function(k,F,e){e.d(F,{Vd:function(){return M},a7:function(){return P},jK:function(){return O},n2:function(){return x},oH:function(){return d},sF:function(){return t},zP:function(){return w}});var R=e(17061),s=e.n(R),g=e(17156),a=e.n(g),Z=e(19676),m=e(58370);function O(n){return v.apply(this,arguments)}function v(){return v=a()(s()().mark(function n(l){var p;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return p=new URLSearchParams(l).toString(),f.abrupt("return",(0,m.Z)("/api/system/dict/type/list?".concat(p),{data:l,method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 2:case"end":return f.stop()}},n)})),v.apply(this,arguments)}function M(n){return(0,m.Z)("/api/system/dict/type/".concat(n),{method:"GET"})}function w(n){return(0,m.Z)("/api/system/dict/data/type/".concat(n),{method:"GET"})}function d(n){return _.apply(this,arguments)}function _(){return _=a()(s()().mark(function n(l){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.Z)("/api/system/dict/type",{method:"POST",data:l}));case 1:case"end":return o.stop()}},n)})),_.apply(this,arguments)}function P(n){return c.apply(this,arguments)}function c(){return c=a()(s()().mark(function n(l){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.Z)("/api/system/dict/type",{method:"PUT",data:l}));case 1:case"end":return o.stop()}},n)})),c.apply(this,arguments)}function t(n){return B.apply(this,arguments)}function B(){return B=a()(s()().mark(function n(l){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.Z)("/api/system/dict/type/".concat(l),{method:"DELETE",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return o.stop()}},n)})),B.apply(this,arguments)}function x(n){return(0,Z.su)("/api/system/dict/type/export",{params:n},"dict_type_".concat(new Date().getTime(),".xlsx"))}},39240:function(k,F,e){e.d(F,{Af:function(){return O},Th:function(){return w},_8:function(){return P},bL:function(){return d},n_:function(){return t}});var R=e(17061),s=e.n(R),g=e(17156),a=e.n(g),Z=e(19676),m=e(58370);function O(n){return v.apply(this,arguments)}function v(){return v=a()(s()().mark(function n(l){var p;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return p=new URLSearchParams(l).toString(),f.abrupt("return",(0,m.Z)("/api/system/menu/list?".concat(p),{data:l,method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 2:case"end":return f.stop()}},n)})),v.apply(this,arguments)}function M(n){return request("/api/system/menu/".concat(n),{method:"GET"})}function w(){return(0,m.Z)("/api/system/menu/treeselect",{method:"GET"})}function d(n){return _.apply(this,arguments)}function _(){return _=a()(s()().mark(function n(l){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.Z)("/api/system/menu",{method:"POST",data:l}));case 1:case"end":return o.stop()}},n)})),_.apply(this,arguments)}function P(n){return c.apply(this,arguments)}function c(){return c=a()(s()().mark(function n(l){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.Z)("/api/system/menu",{method:"PUT",data:l}));case 1:case"end":return o.stop()}},n)})),c.apply(this,arguments)}function t(n){return B.apply(this,arguments)}function B(){return B=a()(s()().mark(function n(l){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.Z)("/api/system/menu/".concat(l),{method:"DELETE",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return o.stop()}},n)})),B.apply(this,arguments)}function x(n){return downLoadXlsx("/api/system/menu/export",{params:n},"menu_".concat(new Date().getTime(),".xlsx"))}},35345:function(k,F,e){e.r(F),e.d(F,{default:function(){return Te}});var R=e(27424),s=e.n(R),g=e(17061),a=e.n(g),Z=e(42122),m=e.n(Z),O=e(17156),v=e.n(O),M=e(49101),w=e(73171),d=e(48086),_=e(71577),P=e(50146),c=e(67294),t=e(9459),B=e(88601),x=e(16894),n=e(12088),l=e(49947),p=e(31199),o=e(5966),f=e(86615),$=e(90672),ue=e(71257),G=e(71230),z=e(15746),me=e(7573),r=e(85893),_e=function(i){var D=ue.Z.useForm(),T=s()(D,1),h=T[0],L=i.menuTree,u=i.menuCheckedKeys,b=(0,c.useState)(),Y=s()(b,2),te=Y[0],N=Y[1],ae=i.statusOptions;(0,c.useEffect)(function(){h.resetFields(),h.setFieldsValue({roleId:i.values.roleId,roleName:i.values.roleName,roleKey:i.values.roleKey,roleSort:i.values.roleSort,dataScope:i.values.dataScope,menuCheckStrictly:i.values.menuCheckStrictly,deptCheckStrictly:i.values.deptCheckStrictly,status:i.values.status,delFlag:i.values.delFlag,createBy:i.values.createBy,createTime:i.values.createTime,updateBy:i.values.updateBy,updateTime:i.values.updateTime,remark:i.values.remark,menuIds:i.values.menuIds})},[h,i]);var S=(0,t.useIntl)(),W=function(){h.submit()},q=function(){i.onCancel(),h.resetFields()},ne=function(X){i.onSubmit(m()(m()({},X),{},{menuIds:te}))};return(0,r.jsx)(P.Z,{width:640,title:S.formatMessage({id:"system.Role.modify_info",defaultMessage:"\u7F16\u8F91\u89D2\u8272\u4FE1\u606F"}),visible:i.visible,destroyOnClose:!0,onOk:W,onCancel:q,children:(0,r.jsxs)(ue.Z,{form:h,onFinish:ne,initialValues:i.values,children:[(0,r.jsx)(G.Z,{gutter:[16,16],children:(0,r.jsx)(z.Z,{span:24,order:1,children:(0,r.jsx)(p.Z,{name:"roleId",label:S.formatMessage({id:"system.Role.role_id",defaultMessage:"\u89D2\u8272ID"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272ID",disabled:!0,hidden:!i.values.roleId,rules:[{required:!1,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272ID\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272ID\uFF01"})}]})})}),(0,r.jsx)(G.Z,{gutter:[16,16],children:(0,r.jsx)(z.Z,{span:24,order:1,children:(0,r.jsx)(o.Z,{name:"roleName",label:S.formatMessage({id:"system.Role.role_name",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",rules:[{required:!0,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01"})}]})})}),(0,r.jsx)(G.Z,{gutter:[16,16],children:(0,r.jsx)(z.Z,{span:24,order:1,children:(0,r.jsx)(o.Z,{name:"roleKey",label:S.formatMessage({id:"system.Role.role_key",defaultMessage:"\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32",rules:[{required:!0,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01"})}]})})}),(0,r.jsx)(G.Z,{gutter:[16,16],children:(0,r.jsx)(z.Z,{span:24,order:1,children:(0,r.jsx)(p.Z,{name:"roleSort",label:S.formatMessage({id:"system.Role.role_sort",defaultMessage:"\u663E\u793A\u987A\u5E8F"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F",rules:[{required:!0,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\uFF01"})}]})})}),(0,r.jsx)(G.Z,{gutter:[16,16],children:(0,r.jsx)(z.Z,{span:24,order:1,children:(0,r.jsx)(f.Z.Group,{valueEnum:ae,name:"status",label:S.formatMessage({id:"system.Role.status",defaultMessage:"\u89D2\u8272\u72B6\u6001"}),labelCol:{span:24},width:"xl",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u72B6\u6001",rules:[{required:!0,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u72B6\u6001\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u72B6\u6001\uFF01"})}]})})}),(0,r.jsx)(G.Z,{gutter:[16,16],children:(0,r.jsx)(z.Z,{span:24,order:1,children:(0,r.jsx)(l.ZP.Item,{name:"menuIds",label:S.formatMessage({id:"system.Role.auth",defaultMessage:"\u83DC\u5355\u6743\u9650"}),children:(0,r.jsx)(me.Z,{checkable:!0,multiple:!0,checkStrictly:!0,defaultExpandAll:!1,treeData:L,defaultCheckedKeys:u,onCheck:function(X){N(X.checked)}})})})}),(0,r.jsx)(G.Z,{gutter:[16,16],children:(0,r.jsx)(z.Z,{span:24,order:1,children:(0,r.jsx)($.Z,{name:"remark",label:S.formatMessage({id:"system.Role.remark",defaultMessage:"\u5907\u6CE8"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",rules:[{required:!1,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u5907\u6CE8\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u5907\u6CE8\uFF01"})}]})})})]})})},fe=_e,he=e(33936),ve=e(39240),le=e(40367),Pe=e(68137),Ee=function(){var U=v()(a()().mark(function i(D){var T,h;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return T=d.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),u.prev=1,u.next=4,(0,n._d)(m()({},D));case 4:return h=u.sent,T(),h.code===200?d.ZP.success("\u6DFB\u52A0\u6210\u529F"):d.ZP.error(h.msg),u.abrupt("return",!0);case 10:return u.prev=10,u.t0=u.catch(1),T(),d.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),u.abrupt("return",!1);case 15:case"end":return u.stop()}},i,null,[[1,10]])}));return function(D){return U.apply(this,arguments)}}(),ge=function(){var U=v()(a()().mark(function i(D){var T,h;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return T=d.ZP.loading("\u6B63\u5728\u914D\u7F6E"),u.prev=1,u.next=4,(0,n.ul)(D);case 4:return h=u.sent,T(),h.code===200?d.ZP.success("\u914D\u7F6E\u6210\u529F"):d.ZP.error(h.msg),u.abrupt("return",!0);case 10:return u.prev=10,u.t0=u.catch(1),T(),d.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),u.abrupt("return",!1);case 15:case"end":return u.stop()}},i,null,[[1,10]])}));return function(D){return U.apply(this,arguments)}}(),oe=function(){var U=v()(a()().mark(function i(D){var T,h;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(T=d.ZP.loading("\u6B63\u5728\u5220\u9664"),D){u.next=3;break}return u.abrupt("return",!0);case 3:return u.prev=3,u.next=6,(0,n.l5)(D.map(function(b){return b.roleId}).join(","));case 6:return h=u.sent,T(),h.code===200?d.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):d.ZP.error(h.msg),u.abrupt("return",!0);case 12:return u.prev=12,u.t0=u.catch(3),T(),d.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),u.abrupt("return",!1);case 17:case"end":return u.stop()}},i,null,[[3,12]])}));return function(D){return U.apply(this,arguments)}}(),ye=function(){var U=v()(a()().mark(function i(D){var T,h,L;return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(T=d.ZP.loading("\u6B63\u5728\u5220\u9664"),D){b.next=3;break}return b.abrupt("return",!0);case 3:return b.prev=3,h=[D.roleId],b.next=7,(0,n.l5)(h.join(","));case 7:return L=b.sent,T(),L.code===200?d.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):d.ZP.error(L.msg),b.abrupt("return",!0);case 13:return b.prev=13,b.t0=b.catch(3),T(),d.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),b.abrupt("return",!1);case 18:case"end":return b.stop()}},i,null,[[3,13]])}));return function(D){return U.apply(this,arguments)}}(),Me=function(){var U=v()(a()().mark(function i(){var D;return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return D=d.ZP.loading("\u6B63\u5728\u5BFC\u51FA"),h.prev=1,h.next=4,(0,n.Lp)();case 4:return D(),d.ZP.success("\u5BFC\u51FA\u6210\u529F"),h.abrupt("return",!0);case 9:return h.prev=9,h.t0=h.catch(1),D(),d.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),h.abrupt("return",!1);case 14:case"end":return h.stop()}},i,null,[[1,9]])}));return function(){return U.apply(this,arguments)}}(),De=function(){var i=(0,c.useRef)(),D=(0,c.useState)(!1),T=s()(D,2),h=T[0],L=T[1],u=(0,c.useRef)(),b=(0,c.useState)(),Y=s()(b,2),te=Y[0],N=Y[1],ae=(0,c.useState)([]),S=s()(ae,2),W=S[0],q=S[1],ne=(0,c.useState)([]),V=s()(ne,2),X=V[0],Fe=V[1],Re=(0,c.useState)(),ie=s()(Re,2),Oe=ie[0],de=ie[1],je=(0,c.useState)([]),ce=s()(je,2),Ce=ce[0],pe=ce[1],J=(0,t.useAccess)(),Ze=(0,t.useIntl)();(0,c.useEffect)(function(){(0,he.zP)("sys_normal_disable").then(function(A){if(A.code===200){var j={};A.data.forEach(function(E){j[E.dictValue]=E.dictLabel}),Fe(j)}})},[]);var we=[{title:(0,r.jsx)(t.FormattedMessage,{id:"system.Role.role_id",defaultMessage:"\u89D2\u8272ID"}),dataIndex:"roleId",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(t.FormattedMessage,{id:"system.Role.role_name",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),dataIndex:"roleName",valueType:"text"},{title:(0,r.jsx)(t.FormattedMessage,{id:"system.Role.role_key",defaultMessage:"\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32"}),dataIndex:"roleKey",valueType:"text"},{title:(0,r.jsx)(t.FormattedMessage,{id:"system.Role.role_sort",defaultMessage:"\u663E\u793A\u987A\u5E8F"}),dataIndex:"roleSort",valueType:"text"},{title:(0,r.jsx)(t.FormattedMessage,{id:"system.Role.status",defaultMessage:"\u89D2\u8272\u72B6\u6001"}),dataIndex:"status",valueType:"select",valueEnum:X},{title:(0,r.jsx)(t.FormattedMessage,{id:"system.Role.create_time",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),dataIndex:"createTime",valueType:"dateRange",render:function(j,E){return(0,r.jsx)("span",{children:E.createTime})},search:{transform:function(j){return{"params[beginTime]":j[0],"params[endTime]":j[1]}}},hideInSearch:!0},{title:(0,r.jsx)(t.FormattedMessage,{id:"system.Role.remark",defaultMessage:"\u5907\u6CE8"}),dataIndex:"remark",valueType:"textarea",hideInSearch:!0},{title:(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",width:"220px",valueType:"option",render:function(j,E){return[(0,r.jsx)(_.Z,{type:"link",size:"small",hidden:!J.hasPerms("system:role:edit"),onClick:function(){(0,n.mj)(E.roleId).then(function(I){if(I.code===200){var C=(0,le.wC)(I.menus);de(C),pe(I.checkedKeys),L(!0),N(E)}else d.ZP.warn(I.msg)})},children:(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.edit",defaultMessage:"\u7F16\u8F91"})},"edit"),(0,r.jsx)(_.Z,{type:"link",size:"small",danger:!0,hidden:!J.hasPerms("system:role:remove"),onClick:v()(a()().mark(function y(){return a()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:P.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var K=v()(a()().mark(function ee(){var se;return a()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,ye(E);case 2:se=re.sent,se&&u.current&&u.current.reload();case 4:case"end":return re.stop()}},ee)}));function H(){return K.apply(this,arguments)}return H}()});case 1:case"end":return C.stop()}},y)})),children:(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})},"batchRemove")]}}];return(0,r.jsxs)(Pe.Z,{children:[(0,r.jsx)("div",{style:{width:"100%",float:"right"},children:(0,r.jsx)(x.ZP,{headerTitle:Ze.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:u,formRef:i,rowKey:"roleId",search:{labelWidth:120},toolBarRender:function(){return[(0,r.jsxs)(_.Z,{type:"primary",hidden:!J.hasPerms("system:role:add"),onClick:v()(a()().mark(function j(){return a()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:(0,ve.Th)().then(function(I){if(I.code===200){var C=(0,le.wC)(I.data);de(C),pe([]),L(!0),N(void 0)}else d.ZP.warn(I.msg)});case 1:case"end":return y.stop()}},j)})),children:[(0,r.jsx)(M.Z,{})," ",(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"add"),(0,r.jsxs)(_.Z,{type:"primary",hidden:(W==null?void 0:W.length)===0||!J.hasPerms("system:role:remove"),onClick:v()(a()().mark(function j(){var E,y,I;return a()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,oe(W);case 2:E=K.sent,E&&(q([]),(y=u.current)===null||y===void 0||(I=y.reloadAndRest)===null||I===void 0||I.call(y));case 4:case"end":return K.stop()}},j)})),children:[(0,r.jsx)(w.Z,{}),(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})]},"remove"),(0,r.jsxs)(_.Z,{type:"primary",hidden:!J.hasPerms("system:role:export"),onClick:v()(a()().mark(function j(){return a()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:Me();case 1:case"end":return y.stop()}},j)})),children:[(0,r.jsx)(M.Z,{}),(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.export",defaultMessage:"\u5BFC\u51FA"})]},"export")]},request:function(j){return(0,n.JV)(m()({},j)).then(function(E){return{data:E.rows,total:E.total,success:!0}})},columns:we,rowSelection:{onChange:function(j,E){q(E)}}},"roleList")}),(W==null?void 0:W.length)>0&&(0,r.jsx)(B.Sc,{extra:(0,r.jsxs)("div",{children:[(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"\u5DF2\u9009\u62E9"}),(0,r.jsx)("a",{style:{fontWeight:600},children:W.length}),(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,r.jsx)(_.Z,{hidden:!J.hasPerms("system:role:remove"),onClick:v()(a()().mark(function A(){return a()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:P.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var y=v()(a()().mark(function C(){var K,H,ee;return a()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,oe(W);case 2:K=Q.sent,K&&(q([]),(H=u.current)===null||H===void 0||(ee=H.reloadAndRest)===null||ee===void 0||ee.call(H));case 4:case"end":return Q.stop()}},C)}));function I(){return y.apply(this,arguments)}return I}()});case 1:case"end":return E.stop()}},A)})),children:(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"\u6279\u91CF\u5220\u9664"})},"remove")}),(0,r.jsx)(fe,{onSubmit:function(){var A=v()(a()().mark(function j(E){var y;return a()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(y=!1,!E.roleId){C.next=7;break}return C.next=4,ge(m()({},E));case 4:y=C.sent,C.next=10;break;case 7:return C.next=9,Ee(m()({},E));case 9:y=C.sent;case 10:y&&(L(!1),N(void 0),u.current&&u.current.reload());case 11:case"end":return C.stop()}},j)}));return function(j){return A.apply(this,arguments)}}(),onCancel:function(){L(!1),N(void 0)},visible:h,values:te||{},menuTree:Oe||[],menuCheckedKeys:Ce||[],statusOptions:X})]})},Te=De},12088:function(k,F,e){e.d(F,{JV:function(){return O},Lp:function(){return B},_d:function(){return w},l5:function(){return c},mj:function(){return n},ul:function(){return _}});var R=e(17061),s=e.n(R),g=e(17156),a=e.n(g),Z=e(19676),m=e(58370);function O(l){return v.apply(this,arguments)}function v(){return v=a()(s()().mark(function l(p){var o;return s()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return o=new URLSearchParams(p).toString(),$.abrupt("return",(0,m.Z)("/api/system/role/list?".concat(o),{data:p,method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 2:case"end":return $.stop()}},l)})),v.apply(this,arguments)}function M(l){return request("/api/system/role/".concat(l),{method:"GET"})}function w(l){return d.apply(this,arguments)}function d(){return d=a()(s()().mark(function l(p){return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,m.Z)("/api/system/role",{method:"POST",data:p}));case 1:case"end":return f.stop()}},l)})),d.apply(this,arguments)}function _(l){return P.apply(this,arguments)}function P(){return P=a()(s()().mark(function l(p){return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,m.Z)("/api/system/role",{method:"PUT",data:p}));case 1:case"end":return f.stop()}},l)})),P.apply(this,arguments)}function c(l){return t.apply(this,arguments)}function t(){return t=a()(s()().mark(function l(p){return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,m.Z)("/api/system/role/".concat(p),{method:"DELETE",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return f.stop()}},l)})),t.apply(this,arguments)}function B(l){return x.apply(this,arguments)}function x(){return x=a()(s()().mark(function l(p){return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,Z.su)("/api/system/role/export",{params:p},"role_".concat(new Date().getTime(),".xlsx")));case 1:case"end":return f.stop()}},l)})),x.apply(this,arguments)}function n(l){return(0,m.Z)("/api/system/menu/roleMenuTreeselect/".concat(l),{method:"get"})}},19676:function(k,F,e){e.d(F,{su:function(){return d}});var R=e(17061),s=e.n(R),g=e(42122),a=e.n(g),Z=e(17156),m=e.n(Z),O=e(58370),v={xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",zip:"application/zip"};function M(P){request(P,{method:"GET",responseType:"blob",getResponse:!0}).then(function(c){w(c,v.zip)})}function w(P,c){var t=document.createElement("a"),B=new Blob([P.data],{type:c}),x=new RegExp("filename=([^;]+\\.[^\\.;]+);*"),n=decodeURI(P.response.headers.get("content-disposition")),l=x.exec(n),p=l?l[1]:"file";p=p.replace(/"/g,""),t.style.display="none",t.href=URL.createObjectURL(B),t.setAttribute("download",p),document.body.appendChild(t),t.click(),URL.revokeObjectURL(t.href),document.body.removeChild(t)}function d(P,c,t){return _.apply(this,arguments)}function _(){return _=m()(s()().mark(function P(c,t,B){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,O.Z)(c,a()(a()({},t),{},{method:"POST",responseType:"blob"})).then(function(l){var p=document.createElement("a"),o=l;p.style.display="none",p.href=URL.createObjectURL(o),p.setAttribute("download",B),document.body.appendChild(p),p.click(),URL.revokeObjectURL(p.href),document.body.removeChild(p)}));case 1:case"end":return n.stop()}},P)})),_.apply(this,arguments)}}}]);
