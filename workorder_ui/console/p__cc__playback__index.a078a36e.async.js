"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5328],{31199:function(Y,x,a){var M=a(1413),b=a(44925),k=a(85893),l=a(67294),$=a(99960),w=["fieldProps","min","proFieldProps","max"],A=function(C,U){var f=C.fieldProps,P=C.min,E=C.proFieldProps,g=C.max,o=(0,b.Z)(C,w);return(0,k.jsx)($.Z,(0,M.Z)({valueType:"digit",fieldProps:(0,M.Z)({min:P,max:g},f),ref:U,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:E},o))};x.Z=l.forwardRef(A)},5966:function(Y,x,a){var M=a(1413),b=a(44925),k=a(85893),l=a(99960),$=["fieldProps","proFieldProps"],w=["fieldProps","proFieldProps"],A="text",h=function(P){var E=P.fieldProps,g=P.proFieldProps,o=(0,b.Z)(P,$);return(0,k.jsx)(l.Z,(0,M.Z)({valueType:A,fieldProps:E,filedConfig:{valueType:A},proFieldProps:g},o))},C=function(P){var E=P.fieldProps,g=P.proFieldProps,o=(0,b.Z)(P,w);return(0,k.jsx)(l.Z,(0,M.Z)({valueType:"password",fieldProps:E,proFieldProps:g,filedConfig:{valueType:A}},o))},U=h;U.Password=C,U.displayName="ProFormComponent",x.Z=U},68137:function(Y,x,a){var M=a(88601),b=a(85893),k=function($){return(0,b.jsx)(M._z,{content:$.children})};x.Z=k},90154:function(Y,x,a){a.r(x),a.d(x,{default:function(){return Re}});var M=a(27424),b=a.n(M),k=a(17061),l=a.n(k),$=a(42122),w=a.n($),A=a(17156),h=a.n(A),C=a(49101),U=a(73171),f=a(48086),P=a(71577),E=a(50146),g=a(67294),o=a(9459),ue=a(88601),ie=a(68137),de=a(16894),N=a(58370);function oe(i){return q.apply(this,arguments)}function q(){return q=h()(l()().mark(function i(e){var u;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=new URLSearchParams(e).toString(),t.abrupt("return",(0,N.Z)("/api/cc/playback/list?".concat(u),{data:e,method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 2:case"end":return t.stop()}},i)})),q.apply(this,arguments)}function xe(){return request("/api/cc/playback/listAll",{method:"GET"})}function ke(i){return request("/api/cc/playback/".concat(i),{method:"GET"})}function ce(i){return _.apply(this,arguments)}function _(){return _=h()(l()().mark(function i(e){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,N.Z)("/api/cc/playback",{method:"POST",data:e}));case 1:case"end":return s.stop()}},i)})),_.apply(this,arguments)}function pe(i){return ee.apply(this,arguments)}function ee(){return ee=h()(l()().mark(function i(e){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,N.Z)("/api/cc/playback",{method:"PUT",data:e}));case 1:case"end":return s.stop()}},i)})),ee.apply(this,arguments)}function ne(i){return ae.apply(this,arguments)}function ae(){return ae=h()(l()().mark(function i(e){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,N.Z)("/api/cc/playback/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return s.stop()}},i)})),ae.apply(this,arguments)}var ve=a(31199),fe=a(5966),we=a(3169),H=a(1413),Be=a(67226),$e=a(61239),Ae=a(27230),me=a(93009),he=a(44925),n=a(85893),Pe=a(84391),ge=a(64893),Fe=a(9105),ye=["fieldProps","action","accept","listType","title","max","icon","buttonProps","onChange","disabled","proFieldProps"],Te=function(e,u){var s,t=e.fieldProps,c=e.action,r=e.accept,d=e.listType,L=e.title,D=L===void 0?"\u5355\u51FB\u4E0A\u4F20":L,j=e.max,W=e.icon,S=W===void 0?(0,n.jsx)(Pe.Z,{}):W,J=e.buttonProps,Z=e.onChange,B=e.disabled,V=e.proFieldProps,K=(0,he.Z)(e,ye),y=(0,g.useMemo)(function(){var v;return(v=K.fileList)!==null&&v!==void 0?v:K.value},[K.fileList,K.value]),T=(0,g.useContext)(Fe.A),p=(V==null?void 0:V.mode)||T.mode||"edit",m=(j===void 0||!y||(y==null?void 0:y.length)<j)&&p!=="read",O=(d??(t==null?void 0:t.listType))==="picture-card";return(0,n.jsx)(me.Z,(0,H.Z)((0,H.Z)({action:c,accept:r,ref:u,listType:d||"picture",fileList:y},t),{},{name:(s=t==null?void 0:t.name)!==null&&s!==void 0?s:"file",onChange:function(F){var R;Z==null||Z(F),t==null||(R=t.onChange)===null||R===void 0||R.call(t,F)},children:m&&(O?(0,n.jsxs)("span",{children:[S," ",D]}):(0,n.jsxs)(P.Z,(0,H.Z)((0,H.Z)({disabled:B||(t==null?void 0:t.disabled)},J),{},{children:[S,D]})))}))},be=(0,ge.G)(g.forwardRef(Te),{getValueFromEvent:function(e){return e.fileList}}),je=be,se=a(71257),re=a(71230),te=a(15746),Ze=function(e){var u=se.Z.useForm(),s=b()(u,1),t=s[0];(0,g.useEffect)(function(){t.resetFields(),t.setFieldsValue({id:e.values.id,name:e.values.name,playback:e.values.playback,status:e.values.status,createBy:e.values.createBy,createTime:e.values.createTime,updateBy:e.values.updateBy,updateTime:e.values.updateTime,remark:e.values.remark})},[t,e]);var c=(0,o.useIntl)(),r=function(){t.submit()},d=function(){e.onCancel(),t.resetFields()},L=function(j){e.onSubmit(j)};return(0,n.jsx)(E.Z,{width:640,title:c.formatMessage({id:"cc.playback.modify",defaultMessage:"\u653E\u97F3\u6587\u4EF6"}),visible:e.visible,destroyOnClose:!0,onOk:r,onCancel:d,children:(0,n.jsxs)(se.Z,{form:t,onFinish:L,initialValues:e.values,children:[(0,n.jsx)(re.Z,{gutter:[16,16],children:(0,n.jsx)(te.Z,{span:24,order:1,children:(0,n.jsx)(ve.Z,{name:"id",label:c.formatMessage({id:"cc.playback.id",defaultMessage:"playback ID"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165ID",disabled:!0,hidden:!e.values.id,rules:[{required:!1,message:(0,n.jsx)(o.FormattedMessage,{id:"\u8BF7\u8F93\u5165ID\uFF01",defaultMessage:"\u8BF7\u8F93\u5165ID\uFF01"})}]})})}),(0,n.jsx)(re.Z,{gutter:[16,16],children:(0,n.jsx)(te.Z,{span:12,order:1,children:(0,n.jsx)(fe.Z,{name:"name",label:c.formatMessage({id:"cc.gateway.name",defaultMessage:"\u540D\u79F0"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",rules:[{required:!0,message:(0,n.jsx)(o.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u540D\u79F0\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u540D\u79F0\uFF01"})}]})})}),(0,n.jsx)(re.Z,{gutter:[24,24],children:(0,n.jsx)(te.Z,{span:24,order:1,children:(0,n.jsx)(je,{name:"upload",label:"\u4E0A\u4F20\u6587\u4EF6",max:1,fieldProps:{name:"file",listType:"picture-card",multiple:!1,beforeUpload:function(j){return!0}},accept:".wav,.mp3",rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u6587\u4EF6"},{validator:function(j,W){var S=b()(W,1),J=S[0];return new Promise(function(Z,B){Z()})}}],action:"/upload.do",extra:(0,n.jsx)("span",{children:"\u652F\u6301\u683C\u5F0F\uFF1A.wav .mp3 \uFF0C\u5355\u4E2A\u6587\u4EF6\u4E0D\u80FD\u8D85\u8FC71MB\u3002"})})})})]})})},Me=Ze,Ce=function(){var i=h()(l()().mark(function e(u){var s,t;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s=f.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),r.prev=1,r.next=4,ce(w()({},u));case 4:return t=r.sent,s(),t.code===200?f.ZP.success("\u6DFB\u52A0\u6210\u529F"):f.ZP.error(t.msg),r.abrupt("return",!0);case 10:return r.prev=10,r.t0=r.catch(1),s(),f.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),r.abrupt("return",!1);case 15:case"end":return r.stop()}},e,null,[[1,10]])}));return function(u){return i.apply(this,arguments)}}(),Ee=function(){var i=h()(l()().mark(function e(u){var s,t;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s=f.ZP.loading("\u6B63\u5728\u914D\u7F6E"),r.prev=1,r.next=4,pe(u);case 4:return t=r.sent,s(),t.code===200?f.ZP.success("\u914D\u7F6E\u6210\u529F"):f.ZP.error(t.msg),r.abrupt("return",!0);case 10:return r.prev=10,r.t0=r.catch(1),s(),f.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),r.abrupt("return",!1);case 15:case"end":return r.stop()}},e,null,[[1,10]])}));return function(u){return i.apply(this,arguments)}}(),le=function(){var i=h()(l()().mark(function e(u){var s,t;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s=f.ZP.loading("\u6B63\u5728\u5220\u9664"),u){r.next=3;break}return r.abrupt("return",!0);case 3:return r.prev=3,r.next=6,ne(u.map(function(d){return d.id}).join(","));case 6:return t=r.sent,s(),t.code===200?f.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):f.ZP.error(t.msg),r.abrupt("return",!0);case 12:return r.prev=12,r.t0=r.catch(3),s(),f.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),r.abrupt("return",!1);case 17:case"end":return r.stop()}},e,null,[[3,12]])}));return function(u){return i.apply(this,arguments)}}(),De=function(){var i=h()(l()().mark(function e(u){var s,t,c;return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s=f.ZP.loading("\u6B63\u5728\u5220\u9664"),u){d.next=3;break}return d.abrupt("return",!0);case 3:return d.prev=3,t=[u.id],d.next=7,ne(t.join(","));case 7:return c=d.sent,s(),c.code===200?f.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):f.ZP.error(c.msg),d.abrupt("return",!0);case 13:return d.prev=13,d.t0=d.catch(3),s(),f.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),d.abrupt("return",!1);case 18:case"end":return d.stop()}},e,null,[[3,13]])}));return function(u){return i.apply(this,arguments)}}(),Oe=function(){var e=(0,g.useRef)(),u=(0,g.useRef)(),s=(0,g.useState)([]),t=b()(s,2),c=t[0],r=t[1],d=(0,g.useState)(),L=b()(d,2),D=L[0],j=L[1],W=(0,g.useState)(!1),S=b()(W,2),J=S[0],Z=S[1],B=(0,o.useAccess)(),V=(0,o.useIntl)();(0,g.useEffect)(function(){},[]);var K=[{title:(0,n.jsx)(o.FormattedMessage,{id:"cc.playback.name",defaultMessage:"\u540D\u79F0"}),dataIndex:"name",valueType:"text",width:"40%"},{title:(0,n.jsx)(o.FormattedMessage,{id:"cc.playback.playback",defaultMessage:"\u6587\u4EF6"}),dataIndex:"playback",valueType:"text",width:"20%"},{title:(0,n.jsx)(o.FormattedMessage,{id:"cc.playback.updateTime",defaultMessage:"\u65F6\u95F4"}),dataIndex:"updateTime",valueType:"dateTime",width:"20%"},{title:(0,n.jsx)(o.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",width:"15%",valueType:"option",render:function(T,p){return[(0,n.jsx)(P.Z,{type:"link",size:"small",hidden:!B.hasPerms("cc:playback:edit"),onClick:function(){Z(!0),j(p)},children:(0,n.jsx)(o.FormattedMessage,{id:"pages.searchTable.edit",defaultMessage:"\u7F16\u8F91"})},"edit"),(0,n.jsx)(P.Z,{type:"link",size:"small",danger:!0,hidden:!B.hasPerms("cc:playback:remove"),onClick:h()(l()().mark(function m(){return l()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:E.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var F=h()(l()().mark(function Q(){var I;return l()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,De(p);case 2:I=G.sent,I&&u.current&&u.current.reload();case 4:case"end":return G.stop()}},Q)}));function R(){return F.apply(this,arguments)}return R}()});case 1:case"end":return v.stop()}},m)})),children:(0,n.jsx)(o.FormattedMessage,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})},"batchRemove")]}}];return(0,n.jsxs)(ie.Z,{children:[(0,n.jsx)("div",{style:{width:"100%",float:"right"},children:(0,n.jsx)(de.ZP,{headerTitle:V.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:u,formRef:e,rowKey:"postId",search:{labelWidth:120},toolBarRender:function(){return[(0,n.jsxs)(P.Z,{type:"primary",hidden:!B.hasPerms("cc:playback:add"),onClick:h()(l()().mark(function T(){return l()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:j(void 0),Z(!0);case 2:case"end":return m.stop()}},T)})),children:[(0,n.jsx)(C.Z,{})," ",(0,n.jsx)(o.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"add"),(0,n.jsxs)(P.Z,{type:"primary",hidden:(c==null?void 0:c.length)===0||!B.hasPerms("cc:playback:remove"),onClick:h()(l()().mark(function T(){var p,m,O;return l()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,le(c);case 2:p=F.sent,p&&(r([]),(m=u.current)===null||m===void 0||(O=m.reloadAndRest)===null||O===void 0||O.call(m));case 4:case"end":return F.stop()}},T)})),children:[(0,n.jsx)(U.Z,{}),(0,n.jsx)(o.FormattedMessage,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})]},"remove")]},request:function(T){return oe(w()({},T)).then(function(p){return{data:p.rows,total:p.total,success:!0}})},columns:K,rowSelection:{onChange:function(T,p){r(p)}}},"postList")}),(c==null?void 0:c.length)>0&&(0,n.jsx)(ue.Sc,{extra:(0,n.jsxs)("div",{children:[(0,n.jsx)(o.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"\u5DF2\u9009\u62E9"}),(0,n.jsx)("a",{style:{fontWeight:600},children:c.length}),(0,n.jsx)(o.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,n.jsx)(P.Z,{hidden:!B.hasPerms("cc:playback:remove"),onClick:h()(l()().mark(function y(){return l()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:E.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var m=h()(l()().mark(function v(){var F,R,Q,I,X;return l()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return r([]),(F=u.current)===null||F===void 0||(R=F.reloadAndRest)===null||R===void 0||R.call(F),z.next=4,le(c);case 4:Q=z.sent,Q&&(r([]),(I=u.current)===null||I===void 0||(X=I.reloadAndRest)===null||X===void 0||X.call(I));case 6:case"end":return z.stop()}},v)}));function O(){return m.apply(this,arguments)}return O}()});case 1:case"end":return p.stop()}},y)})),children:(0,n.jsx)(o.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"\u6279\u91CF\u5220\u9664"})},"remove")}),(0,n.jsx)(Me,{onSubmit:function(){var y=h()(l()().mark(function T(p){var m;return l()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(m=!1,!p.id){v.next=7;break}return v.next=4,Ee(w()({},p));case 4:m=v.sent,v.next=10;break;case 7:return v.next=9,Ce(w()({},p));case 9:m=v.sent;case 10:m&&(Z(!1),j(void 0),u.current&&u.current.reload());case 11:case"end":return v.stop()}},T)}));return function(T){return y.apply(this,arguments)}}(),onCancel:function(){Z(!1),j(void 0)},visible:J,values:D||{}})]})},Re=Oe}}]);
