"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3925],{31199:function(N,O,e){var P=e(1413),s=e(44925),F=e(85893),a=e(67294),g=e(99960),_=["fieldProps","min","proFieldProps","max"],M=function(j,T){var c=j.fieldProps,f=j.min,h=j.proFieldProps,o=j.max,t=(0,s.Z)(j,_);return(0,F.jsx)(g.Z,(0,P.Z)({valueType:"digit",fieldProps:(0,P.Z)({min:f,max:o},c),ref:T,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:h},t))};O.Z=a.forwardRef(M)},86615:function(N,O,e){var P=e(6495),s=e(47933),F=e(1413),a=e(44925),g=e(85893),_=e(22270),M=e(67294),v=e(64893),j=e(99960),T=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],c=M.forwardRef(function(t,m){var D=t.fieldProps,i=t.options,l=t.radioType,n=t.layout,p=t.proFieldProps,B=t.valueEnum,E=(0,a.Z)(t,T);return(0,g.jsx)(j.Z,(0,F.Z)((0,F.Z)({valueType:l==="button"?"radioButton":"radio",ref:m,valueEnum:(0,_.h)(B,void 0)},E),{},{fieldProps:(0,F.Z)({options:i,layout:n},D),proFieldProps:p,filedConfig:{customLightMode:!0}}))}),f=M.forwardRef(function(t,m){var D=t.fieldProps,i=t.children;return(0,g.jsx)(s.ZP,(0,F.Z)((0,F.Z)({},D),{},{ref:m,children:i}))}),h=(0,v.G)(f,{valuePropName:"checked",ignoreWidth:!0}),o=h;o.Group=c,o.Button=s.ZP.Button,o.displayName="ProFormComponent",O.Z=o},64317:function(N,O,e){var P=e(1413),s=e(44925),F=e(85893),a=e(22270),g=e(67294),_=e(66758),M=e(99960),v=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],j=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],T=g.forwardRef(function(t,m){var D=t.fieldProps,i=t.children,l=t.params,n=t.proFieldProps,p=t.mode,B=t.valueEnum,E=t.request,$=t.showSearch,J=t.options,b=(0,s.Z)(t,v),U=(0,g.useContext)(_.Z);return(0,F.jsx)(M.Z,(0,P.Z)((0,P.Z)({valueEnum:(0,a.h)(B),request:E,params:l,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,P.Z)({options:J,mode:p,showSearch:$,getPopupContainer:U.getPopupContainer},D),ref:m,proFieldProps:n},b),{},{children:i}))}),c=g.forwardRef(function(t,m){var D=t.fieldProps,i=t.children,l=t.params,n=t.proFieldProps,p=t.mode,B=t.valueEnum,E=t.request,$=t.options,J=(0,s.Z)(t,j),b=(0,P.Z)({options:$,mode:p||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},D),U=(0,g.useContext)(_.Z);return(0,F.jsx)(M.Z,(0,P.Z)((0,P.Z)({valueEnum:(0,a.h)(B),request:E,params:l,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,P.Z)({getPopupContainer:U.getPopupContainer},b),ref:m,proFieldProps:n},J),{},{children:i}))}),f=T,h=c,o=f;o.SearchSelect=h,o.displayName="ProFormComponent",O.Z=o},5966:function(N,O,e){var P=e(1413),s=e(44925),F=e(85893),a=e(99960),g=["fieldProps","proFieldProps"],_=["fieldProps","proFieldProps"],M="text",v=function(f){var h=f.fieldProps,o=f.proFieldProps,t=(0,s.Z)(f,g);return(0,F.jsx)(a.Z,(0,P.Z)({valueType:M,fieldProps:h,filedConfig:{valueType:M},proFieldProps:o},t))},j=function(f){var h=f.fieldProps,o=f.proFieldProps,t=(0,s.Z)(f,_);return(0,F.jsx)(a.Z,(0,P.Z)({valueType:"password",fieldProps:h,proFieldProps:o,filedConfig:{valueType:M}},t))},T=v;T.Password=j,T.displayName="ProFormComponent",O.Z=T},19054:function(N,O,e){var P=e(1413),s=e(44925),F=e(85893),a=e(67294),g=e(99960),_=["fieldProps","request","params","proFieldProps"],M=function(T,c){var f=T.fieldProps,h=T.request,o=T.params,t=T.proFieldProps,m=(0,s.Z)(T,_);return(0,F.jsx)(g.Z,(0,P.Z)({valueType:"treeSelect",fieldProps:f,ref:c,request:h,params:o,filedConfig:{customLightMode:!0},proFieldProps:t},m))},v=a.forwardRef(M);O.Z=v},68137:function(N,O,e){var P=e(88601),s=e(85893),F=function(g){return(0,s.jsx)(P._z,{content:g.children})};O.Z=F},91128:function(N,O,e){e.d(O,{j1:function(){return f},je:function(){return v},lQ:function(){return T},m_:function(){return _},q4:function(){return o}});var P=e(17061),s=e.n(P),F=e(17156),a=e.n(F),g=e(58370);function _(m){return M.apply(this,arguments)}function M(){return M=a()(s()().mark(function m(D){var i;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=new URLSearchParams(D).toString(),n.abrupt("return",(0,g.Z)("/api/cc/company/list?".concat(i),{data:D,method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 2:case"end":return n.stop()}},m)})),M.apply(this,arguments)}function v(){return(0,g.Z)("/api/cc/company/listAll",{method:"GET"})}function j(m){return request("/api/cc/company/".concat(m),{method:"GET"})}function T(m){return c.apply(this,arguments)}function c(){return c=a()(s()().mark(function m(D){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return console.log("--------------addd company"),l.abrupt("return",(0,g.Z)("/api/cc/company",{method:"POST",data:D}));case 2:case"end":return l.stop()}},m)})),c.apply(this,arguments)}function f(m){return h.apply(this,arguments)}function h(){return h=a()(s()().mark(function m(D){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,g.Z)("/api/cc/company",{method:"PUT",data:D}));case 1:case"end":return l.stop()}},m)})),h.apply(this,arguments)}function o(m){return t.apply(this,arguments)}function t(){return t=a()(s()().mark(function m(D){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,g.Z)("/api/cc/company/".concat(D),{method:"DELETE",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return l.stop()}},m)})),t.apply(this,arguments)}},64866:function(N,O,e){e.r(O),e.d(O,{default:function(){return ye}});var P=e(27424),s=e.n(P),F=e(17061),a=e.n(F),g=e(42122),_=e.n(g),M=e(17156),v=e.n(M),j=e(49101),T=e(73171),c=e(48086),f=e(71577),h=e(50146),o=e(67294),t=e(9459),m=e(88601),D=e(68137),i=e(16894),l=e(32917),n=e(31199),p=e(64317),B=e(19054),E=e(5966),$=e(86615),J=e(71257),b=e(71230),U=e(15746),r=e(85893),fe=function(d){var x=J.Z.useForm(),Z=s()(x,1),C=Z[0],W=d.statusOptions,u=d.deptTree,L=d.companyList,ne=(0,o.useState)(!1),ue=s()(ne,2),Q=ue[0],te=ue[1];(0,o.useEffect)(function(){C.resetFields(),C.setFieldsValue({deptId:d.values.deptId,companyId:d.values.companyId==null?null:d.values.companyId+"",parentId:d.values.parentId,ancestors:d.values.ancestors,deptName:d.values.deptName,orderNum:d.values.orderNum,leader:d.values.leader,phone:d.values.phone,email:d.values.email,status:d.values.status,delFlag:d.values.delFlag,createBy:d.values.createBy,createTime:d.values.createTime,updateBy:d.values.updateBy,updateTime:d.values.updateTime}),te(!1)},[C,d]);var S=(0,t.useIntl)(),k=function(){C.submit()},le=function(){d.onCancel(),C.resetFields()},de=function(){var X=v()(a()().mark(function G(H){return a()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:d.onSubmit(H);case 1:case"end":return Y.stop()}},G)}));return function(H){return X.apply(this,arguments)}}(),oe=function(G){G=="1"?te(!1):te(!0),C.setFieldsValue({companyId:null}),console.log("----------------dep id="+G)};return(0,r.jsx)(h.Z,{width:640,title:S.formatMessage({id:"system.Dept.modify",defaultMessage:"\u7F16\u8F91Dept"}),visible:d.visible,destroyOnClose:!0,onOk:k,onCancel:le,children:(0,r.jsxs)(J.Z,{form:C,onFinish:de,initialValues:d.values,children:[(0,r.jsx)(b.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(n.Z,{name:"deptId",label:S.formatMessage({id:"system.Dept.dept_id",defaultMessage:"\u90E8\u95E8id"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8id",hidden:!0,rules:[{required:!1,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u90E8\u95E8id\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u90E8\u95E8id\uFF01"})}]})})}),(0,r.jsx)(b.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(p.Z,{valueEnum:L,name:"companyId",label:S.formatMessage({id:"system.Dept.company_id",defaultMessage:"\u6240\u5C5E\u516C\u53F8"}),width:"xl",hidden:d.values.deptId==1||Q,placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u516C\u53F8",rules:[{required:!Q,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u9009\u62E9\u6240\u5C5E\u516C\u53F8\uFF01",defaultMessage:"\u8BF7\u9009\u62E9\u6240\u5C5E\u516C\u53F8\uFF01"})}]})})}),(0,r.jsx)(b.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(B.Z,{name:"parentId",label:S.formatMessage({id:"system.Dept.parent_dept",defaultMessage:"\u4E0A\u7EA7\u90E8\u95E8:"}),request:v()(a()().mark(function X(){return a()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",u);case 1:case"end":return H.stop()}},X)})),fieldProps:{onChange:function(G){return oe(G)}},width:"xl",placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",rules:[{required:!0,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8\uFF01",defaultMessage:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8!"})}]})})}),(0,r.jsx)(b.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(E.Z,{name:"ancestors",label:S.formatMessage({id:"system.Dept.ancestors",defaultMessage:"\u7956\u7EA7\u5217\u8868"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u7956\u7EA7\u5217\u8868",hidden:!0,rules:[{required:!1,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u7956\u7EA7\u5217\u8868\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u7956\u7EA7\u5217\u8868\uFF01"})}]})})}),(0,r.jsx)(b.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(E.Z,{name:"deptName",label:S.formatMessage({id:"system.Dept.dept_name",defaultMessage:"\u90E8\u95E8\u540D\u79F0"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",rules:[{required:!1,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0\uFF01"})}]})})}),(0,r.jsx)(b.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(n.Z,{name:"orderNum",label:S.formatMessage({id:"system.Dept.order_num",defaultMessage:"\u663E\u793A\u987A\u5E8F"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F",rules:[{required:!1,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\uFF01"})}]})})}),(0,r.jsx)(b.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(E.Z,{name:"leader",label:S.formatMessage({id:"system.Dept.leader",defaultMessage:"\u8D1F\u8D23\u4EBA"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA",rules:[{required:!1,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\uFF01"})}]})})}),(0,r.jsx)(b.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(E.Z,{name:"phone",label:S.formatMessage({id:"system.Dept.phone",defaultMessage:"\u8054\u7CFB\u7535\u8BDD"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",rules:[{required:!1,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD\uFF01"})}]})})}),(0,r.jsx)(b.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(E.Z,{name:"email",label:S.formatMessage({id:"system.Dept.email",defaultMessage:"\u90AE\u7BB1"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",rules:[{required:!1,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF01"})}]})})}),(0,r.jsx)(b.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)($.Z.Group,{valueEnum:W,name:"status",label:S.formatMessage({id:"system.Dept.status",defaultMessage:"\u90E8\u95E8\u72B6\u6001"}),labelCol:{span:24},width:"xl",placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u72B6\u6001",rules:[{required:!1,message:(0,r.jsx)(t.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u90E8\u95E8\u72B6\u6001\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u90E8\u95E8\u72B6\u6001\uFF01"})}]})})})]})})},he=fe,ve=e(33936),ie=e(40367),Ee=e(91128),Pe=function(){var z=v()(a()().mark(function d(x){var Z,C;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return Z=c.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),u.prev=1,u.next=4,(0,l.CZ)(_()({},x));case 4:return C=u.sent,Z(),C.code===200?c.ZP.success("\u6DFB\u52A0\u6210\u529F"):c.ZP.error(C.msg),u.abrupt("return",!0);case 10:return u.prev=10,u.t0=u.catch(1),Z(),c.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),u.abrupt("return",!1);case 15:case"end":return u.stop()}},d,null,[[1,10]])}));return function(x){return z.apply(this,arguments)}}(),ge=function(){var z=v()(a()().mark(function d(x){var Z,C;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return Z=c.ZP.loading("\u6B63\u5728\u914D\u7F6E"),u.prev=1,u.next=4,(0,l.MB)(x);case 4:return C=u.sent,Z(),C.code===200?c.ZP.success("\u914D\u7F6E\u6210\u529F"):c.ZP.error(C.msg),u.abrupt("return",!0);case 10:return u.prev=10,u.t0=u.catch(1),Z(),c.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),u.abrupt("return",!1);case 15:case"end":return u.stop()}},d,null,[[1,10]])}));return function(x){return z.apply(this,arguments)}}(),me=function(){var z=v()(a()().mark(function d(x){var Z,C;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(Z=c.ZP.loading("\u6B63\u5728\u5220\u9664"),x){u.next=3;break}return u.abrupt("return",!0);case 3:return u.prev=3,u.next=6,(0,l.X5)(x.map(function(L){return L.deptId}).join(","));case 6:return C=u.sent,Z(),C.code===200?c.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):c.ZP.error(C.msg),u.abrupt("return",!0);case 12:return u.prev=12,u.t0=u.catch(3),Z(),c.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),u.abrupt("return",!1);case 17:case"end":return u.stop()}},d,null,[[3,12]])}));return function(x){return z.apply(this,arguments)}}(),Fe=function(){var z=v()(a()().mark(function d(x){var Z,C,W;return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(Z=c.ZP.loading("\u6B63\u5728\u5220\u9664"),x){L.next=3;break}return L.abrupt("return",!0);case 3:return L.prev=3,C=[x.deptId],L.next=7,(0,l.X5)(C.join(","));case 7:return W=L.sent,Z(),W.code===200?c.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):c.ZP.error(W.msg),L.abrupt("return",!0);case 13:return L.prev=13,L.t0=L.catch(3),Z(),c.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),L.abrupt("return",!1);case 18:case"end":return L.stop()}},d,null,[[3,13]])}));return function(x){return z.apply(this,arguments)}}(),De=function(){var d=(0,o.useRef)(),x=(0,o.useState)(!1),Z=s()(x,2),C=Z[0],W=Z[1],u=(0,o.useRef)(),L=(0,o.useState)(),ne=s()(L,2),ue=ne[0],Q=ne[1],te=(0,o.useState)([]),S=s()(te,2),k=S[0],le=S[1],de=(0,o.useState)([]),oe=s()(de,2),X=oe[0],G=oe[1],H=(0,o.useState)([]),ce=s()(H,2),Y=ce[0],Me=ce[1],Te=(0,o.useState)([]),_e=s()(Te,2),Ce=_e[0],Oe=_e[1],je=(0,t.useIntl)(),re=(0,t.useAccess)();(0,o.useEffect)(function(){(0,ve.zP)("sys_normal_disable").then(function(K){if(K.code===200){var A={};K.data.forEach(function(y){A[y.dictValue]=y.dictLabel}),Me(A)}}),(0,Ee.je)().then(function(K){if(K.code===200){var A={};K.data.forEach(function(y){A[y.id]=y.name}),Oe(A)}})},[]);var Be=[{title:(0,r.jsx)(t.FormattedMessage,{id:"system.Dept.dept_name",defaultMessage:"\u90E8\u95E8\u540D\u79F0"}),dataIndex:"deptName",valueType:"text"},{title:(0,r.jsx)(t.FormattedMessage,{id:"system.Dept.order_num",defaultMessage:"\u663E\u793A\u987A\u5E8F"}),dataIndex:"orderNum",valueType:"text",search:!1},{title:(0,r.jsx)(t.FormattedMessage,{id:"system.Dept.leader",defaultMessage:"\u8D1F\u8D23\u4EBA"}),dataIndex:"leader",valueType:"text",search:!1},{title:(0,r.jsx)(t.FormattedMessage,{id:"system.Dept.phone",defaultMessage:"\u8054\u7CFB\u7535\u8BDD"}),dataIndex:"phone",valueType:"text"},{title:(0,r.jsx)(t.FormattedMessage,{id:"system.Dept.email",defaultMessage:"\u90AE\u7BB1"}),dataIndex:"email",valueType:"text",search:!1},{title:(0,r.jsx)(t.FormattedMessage,{id:"system.Dept.status",defaultMessage:"\u90E8\u95E8\u72B6\u6001"}),dataIndex:"status",valueType:"select",valueEnum:Y},{title:(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",width:"220px",valueType:"option",render:function(A,y){return[(0,r.jsx)(f.Z,{type:"link",size:"small",hidden:!re.hasPerms("system:dept:edit")||y.deptId==1,onClick:function(){(0,l.PM)(y.deptId).then(function(I){if(I.code===200){var R=(0,ie.C2)(I.data,"deptId","deptName","","","");R.length===0&&(R=[{id:0,title:"\u65E0\u4E0A\u7EA7",children:void 0,key:0,value:0}]),G(R),W(!0),Q(y)}else c.ZP.warn(I.msg)})},children:(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.edit",defaultMessage:"\u7F16\u8F91"})},"edit"),(0,r.jsx)(f.Z,{type:"link",size:"small",danger:!0,hidden:!re.hasPerms("system:dept:remove")||y.deptId==1,onClick:v()(a()().mark(function w(){return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:h.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var V=v()(a()().mark(function ae(){var pe;return a()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,Fe(y);case 2:pe=se.sent,pe&&u.current&&u.current.reload();case 4:case"end":return se.stop()}},ae)}));function q(){return V.apply(this,arguments)}return q}()});case 1:case"end":return R.stop()}},w)})),children:(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})},"batchRemove")]}}];return(0,r.jsxs)(D.Z,{children:[(0,r.jsx)("div",{style:{width:"100%",float:"right"},children:(0,r.jsx)(i.ZP,{headerTitle:je.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:u,formRef:d,rowKey:"deptId",search:{labelWidth:120},toolBarRender:function(){return[(0,r.jsxs)(f.Z,{type:"primary",hidden:!re.hasPerms("system:dept:add"),onClick:v()(a()().mark(function A(){return a()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:(0,l.U4)().then(function(I){I.code===200?(G((0,ie.C2)(I.data,"deptId","deptName","","","")),Q(void 0),W(!0)):c.ZP.warn(I.msg)});case 1:case"end":return w.stop()}},A)})),children:[(0,r.jsx)(j.Z,{})," ",(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"add"),(0,r.jsxs)(f.Z,{type:"primary",hidden:(k==null?void 0:k.length)===0||!re.hasPerms("system:dept:remove"),onClick:v()(a()().mark(function A(){var y,w,I;return a()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,me(k);case 2:y=V.sent,y&&(le([]),(w=u.current)===null||w===void 0||(I=w.reloadAndRest)===null||I===void 0||I.call(w));case 4:case"end":return V.stop()}},A)})),children:[(0,r.jsx)(T.Z,{}),(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})]},"remove")]},request:function(A){return(0,l.U4)(_()({},A)).then(function(y){return{data:(0,ie.C2)(y.data,"deptId","","","",""),total:y.data.length,success:!0}})},columns:Be},"deptList")}),(k==null?void 0:k.length)>0&&(0,r.jsx)(m.Sc,{extra:(0,r.jsxs)("div",{children:[(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"\u5DF2\u9009\u62E9"}),(0,r.jsx)("a",{style:{fontWeight:600},children:k.length}),(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,r.jsx)(f.Z,{hidden:!re.hasPerms("system:dept:remove"),onClick:v()(a()().mark(function K(){return a()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:h.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var w=v()(a()().mark(function R(){var V,q,ae;return a()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,me(k);case 2:V=ee.sent,V&&(le([]),(q=u.current)===null||q===void 0||(ae=q.reloadAndRest)===null||ae===void 0||ae.call(q));case 4:case"end":return ee.stop()}},R)}));function I(){return w.apply(this,arguments)}return I}()});case 1:case"end":return y.stop()}},K)})),children:(0,r.jsx)(t.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"\u6279\u91CF\u5220\u9664"})},"remove")}),(0,r.jsx)(he,{onSubmit:function(){var K=v()(a()().mark(function A(y){var w;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(w=!1,!y.deptId){R.next=7;break}return R.next=4,ge(_()({},y));case 4:w=R.sent,R.next=10;break;case 7:return R.next=9,Pe(_()({},y));case 9:w=R.sent;case 10:w&&(W(!1),Q(void 0),u.current&&u.current.reload());case 11:case"end":return R.stop()}},A)}));return function(A){return K.apply(this,arguments)}}(),onCancel:function(){W(!1),Q(void 0)},visible:C,values:ue||{},deptTree:X,statusOptions:Y,companyList:Ce})]})},ye=De},32917:function(N,O,e){e.d(O,{$j:function(){return l},CZ:function(){return f},MB:function(){return o},PM:function(){return T},U4:function(){return v},X5:function(){return m}});var P=e(17061),s=e.n(P),F=e(17156),a=e.n(F),g=e(19676),_=e(58370),M=e(40367);function v(n){return j.apply(this,arguments)}function j(){return j=a()(s()().mark(function n(p){var B;return s()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return B=new URLSearchParams(p).toString(),$.abrupt("return",(0,_.Z)("/api/system/dept/list?".concat(B),{data:p,method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 2:case"end":return $.stop()}},n)})),j.apply(this,arguments)}function T(n){return(0,_.Z)("/api/system/dept/list/exclude/".concat(n),{method:"get"})}function c(n){return request("/api/system/dept/".concat(n),{method:"GET"})}function f(n){return h.apply(this,arguments)}function h(){return h=a()(s()().mark(function n(p){return s()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,_.Z)("/api/system/dept",{method:"POST",data:p}));case 1:case"end":return E.stop()}},n)})),h.apply(this,arguments)}function o(n){return t.apply(this,arguments)}function t(){return t=a()(s()().mark(function n(p){return s()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,_.Z)("/api/system/dept",{method:"PUT",data:p}));case 1:case"end":return E.stop()}},n)})),t.apply(this,arguments)}function m(n){return D.apply(this,arguments)}function D(){return D=a()(s()().mark(function n(p){return s()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,_.Z)("/api/system/dept/".concat(p),{method:"DELETE",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return E.stop()}},n)})),D.apply(this,arguments)}function i(n){return downLoadXlsx("/api/system/dept/export",{params:n},"dept_".concat(new Date().getTime(),".xlsx"))}function l(n){return new Promise(function(p){var B=new URLSearchParams(n).toString();(0,_.Z)("/api/system/dept/treeselect?".concat(B),{method:"get",headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(E){if(E&&E.code===200){var $=(0,M.wC)(E.data);p($)}else p([])})})}},33936:function(N,O,e){e.d(O,{Vd:function(){return j},a7:function(){return h},jK:function(){return M},n2:function(){return D},oH:function(){return c},sF:function(){return t},zP:function(){return T}});var P=e(17061),s=e.n(P),F=e(17156),a=e.n(F),g=e(19676),_=e(58370);function M(i){return v.apply(this,arguments)}function v(){return v=a()(s()().mark(function i(l){var n;return s()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return n=new URLSearchParams(l).toString(),B.abrupt("return",(0,_.Z)("/api/system/dict/type/list?".concat(n),{data:l,method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 2:case"end":return B.stop()}},i)})),v.apply(this,arguments)}function j(i){return(0,_.Z)("/api/system/dict/type/".concat(i),{method:"GET"})}function T(i){return(0,_.Z)("/api/system/dict/data/type/".concat(i),{method:"GET"})}function c(i){return f.apply(this,arguments)}function f(){return f=a()(s()().mark(function i(l){return s()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,_.Z)("/api/system/dict/type",{method:"POST",data:l}));case 1:case"end":return p.stop()}},i)})),f.apply(this,arguments)}function h(i){return o.apply(this,arguments)}function o(){return o=a()(s()().mark(function i(l){return s()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,_.Z)("/api/system/dict/type",{method:"PUT",data:l}));case 1:case"end":return p.stop()}},i)})),o.apply(this,arguments)}function t(i){return m.apply(this,arguments)}function m(){return m=a()(s()().mark(function i(l){return s()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,_.Z)("/api/system/dict/type/".concat(l),{method:"DELETE",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return p.stop()}},i)})),m.apply(this,arguments)}function D(i){return(0,g.su)("/api/system/dict/type/export",{params:i},"dict_type_".concat(new Date().getTime(),".xlsx"))}},19676:function(N,O,e){e.d(O,{su:function(){return c}});var P=e(17061),s=e.n(P),F=e(42122),a=e.n(F),g=e(17156),_=e.n(g),M=e(58370),v={xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",zip:"application/zip"};function j(h){request(h,{method:"GET",responseType:"blob",getResponse:!0}).then(function(o){T(o,v.zip)})}function T(h,o){var t=document.createElement("a"),m=new Blob([h.data],{type:o}),D=new RegExp("filename=([^;]+\\.[^\\.;]+);*"),i=decodeURI(h.response.headers.get("content-disposition")),l=D.exec(i),n=l?l[1]:"file";n=n.replace(/"/g,""),t.style.display="none",t.href=URL.createObjectURL(m),t.setAttribute("download",n),document.body.appendChild(t),t.click(),URL.revokeObjectURL(t.href),document.body.removeChild(t)}function c(h,o,t){return f.apply(this,arguments)}function f(){return f=_()(s()().mark(function h(o,t,m){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,M.Z)(o,a()(a()({},t),{},{method:"POST",responseType:"blob"})).then(function(l){var n=document.createElement("a"),p=l;n.style.display="none",n.href=URL.createObjectURL(p),n.setAttribute("download",m),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}));case 1:case"end":return i.stop()}},h)})),f.apply(this,arguments)}}}]);
