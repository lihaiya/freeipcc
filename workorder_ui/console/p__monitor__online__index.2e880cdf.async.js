"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1854],{68137:function(U,p,e){var v=e(88601),g=e(85893),h=function(T){return(0,g.jsx)(v._z,{content:T.children})};p.Z=h},40640:function(U,p,e){e.r(p),e.d(p,{default:function(){return W}});var v=e(42122),g=e.n(v),h=e(17061),r=e.n(h),T=e(17156),f=e.n(T),x=e(48086),E=e(71577),D=e(50146),F=e(67294),a=e(9459),L=e(16894),C=e(58370);function P(o){return M.apply(this,arguments)}function M(){return M=f()(r()().mark(function o(i){var u;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u=new URLSearchParams(i).toString(),l.abrupt("return",(0,C.Z)("/api/monitor/online/list?".concat(u),{data:i,method:"GET"}));case 2:case"end":return l.stop()}},o)})),M.apply(this,arguments)}function B(o){return y.apply(this,arguments)}function y(){return y=f()(r()().mark(function o(i){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,C.Z)("/api/monitor/online/".concat(i),{method:"DELETE"}));case 1:case"end":return s.stop()}},o)})),y.apply(this,arguments)}var Z=e(68137),t=e(85893),w=function(){var o=f()(r()().mark(function i(u){var s;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=x.ZP.loading("\u6B63\u5728\u5F3A\u5236\u4E0B\u7EBF"),n.prev=1,n.next=4,B(u.tokenId);case 4:return s(),x.ZP.success("\u5F3A\u5236\u4E0B\u7EBF\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(1),s(),x.ZP.error("\u5F3A\u5236\u4E0B\u7EBF\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),n.abrupt("return",!1);case 14:case"end":return n.stop()}},i,null,[[1,9]])}));return function(u){return o.apply(this,arguments)}}(),S=function(){var i=(0,F.useRef)(),u=(0,F.useRef)(),s=(0,a.useAccess)(),l=(0,a.useIntl)();(0,F.useEffect)(function(){},[]);var n=[{title:(0,t.jsx)(a.FormattedMessage,{id:"monitor.OnlineUser.token_id",defaultMessage:"\u4F1A\u8BDD\u7F16\u53F7"}),dataIndex:"tokenId",valueType:"text"},{title:(0,t.jsx)(a.FormattedMessage,{id:"monitor.OnlineUser.user_name",defaultMessage:"\u7528\u6237\u8D26\u53F7"}),dataIndex:"userName",valueType:"text"},{title:(0,t.jsx)(a.FormattedMessage,{id:"monitor.OnlineUser.dept_name",defaultMessage:"\u90E8\u95E8\u540D\u79F0"}),dataIndex:"deptName",valueType:"text"},{title:(0,t.jsx)(a.FormattedMessage,{id:"monitor.OnlineUser.ipaddr",defaultMessage:"\u767B\u5F55IP\u5730\u5740"}),dataIndex:"ipaddr",valueType:"text"},{title:(0,t.jsx)(a.FormattedMessage,{id:"monitor.OnlineUser.login_location",defaultMessage:"\u767B\u5F55\u5730\u70B9"}),dataIndex:"loginLocation",valueType:"text",hideInSearch:!0},{title:(0,t.jsx)(a.FormattedMessage,{id:"monitor.OnlineUser.browser",defaultMessage:"\u6D4F\u89C8\u5668\u7C7B\u578B"}),dataIndex:"browser",valueType:"text",hideInSearch:!0},{title:(0,t.jsx)(a.FormattedMessage,{id:"monitor.OnlineUser.os",defaultMessage:"\u64CD\u4F5C\u7CFB\u7EDF"}),dataIndex:"os",valueType:"text",hideInSearch:!0},{title:(0,t.jsx)(a.FormattedMessage,{id:"monitor.OnlineUser.login_time",defaultMessage:"\u767B\u5F55\u65F6\u95F4"}),dataIndex:"loginTime",valueType:"dateRange",render:function(d,c){return(0,t.jsx)("span",{children:c.loginTime})},search:{transform:function(d){return{"params[beginTime]":d[0],"params[endTime]":d[1]}}}},{title:(0,t.jsx)(a.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",width:"220px",valueType:"option",render:function(d,c){return[(0,t.jsx)(E.Z,{type:"link",size:"small",danger:!0,hidden:!s.hasPerms("system:user:remove"),onClick:f()(r()().mark(function j(){return r()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:D.Z.confirm({title:"\u5F3A\u8E22",content:"\u786E\u5B9A\u5F3A\u5236\u5C06\u8BE5\u7528\u6237\u8E22\u4E0B\u7EBF\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var A=f()(r()().mark(function b(){var R;return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,w(c);case 2:R=m.sent,R&&u.current&&u.current.reload();case 4:case"end":return m.stop()}},b)}));function $(){return A.apply(this,arguments)}return $}()});case 1:case"end":return I.stop()}},j)})),children:"\u5F3A\u9000"},"batchRemove")]}}];return(0,t.jsx)(Z.Z,{children:(0,t.jsx)("div",{style:{width:"100%",float:"right"},children:(0,t.jsx)(L.ZP,{headerTitle:l.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:u,formRef:i,rowKey:"infoId",search:{labelWidth:120},request:function(d){return P(g()({},d)).then(function(c){var j={data:c.rows,total:c.total,success:!0};return j})},columns:n},"logininforList")})})},W=S}}]);
