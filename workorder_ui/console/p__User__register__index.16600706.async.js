"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8797],{38439:function(T,h,r){r.r(h),r.d(h,{default:function(){return Q}});var v=r(27424),d=r.n(v),p=r(67294),f=r(71257),P=r(34041),o=r(4107),G=r(48086),V=r(54458),M=r(55241),O=r(71230),Z=r(15746),y=r(71577),g=r(9459),W=r(17061),S=r.n(W),$=r(17156),U=r.n($);function K(j){return x.apply(this,arguments)}function x(){return x=U()(S()().mark(function j(F){return S()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,g.request)("/api/register",{method:"POST",data:F}));case 1:case"end":return n.stop()}},j)})),x.apply(this,arguments)}var t={main:"main___t_qDh",password:"password___msZpo",getCaptcha:"getCaptcha___xo9tg",submit:"submit___BwUua",login:"login___MAxRH",success:"success___rk5CE",warning:"warning___waKBN",error:"error___e6iWb","progress-pass":"progress-pass___WePal",progress:"progress___pafrf"},e=r(85893),l=f.Z.Item,w=P.Z.Option,L=o.Z.Group,k={ok:(0,e.jsx)("div",{className:t.success,children:(0,e.jsx)("span",{children:"\u5F3A\u5EA6\uFF1A\u5F3A"})}),pass:(0,e.jsx)("div",{className:t.warning,children:(0,e.jsx)("span",{children:"\u5F3A\u5EA6\uFF1A\u4E2D"})}),poor:(0,e.jsx)("div",{className:t.error,children:(0,e.jsx)("span",{children:"\u5F3A\u5EA6\uFF1A\u592A\u77ED"})})},H={ok:"success",pass:"normal",poor:"exception"},J=function(){var F=(0,p.useState)(0),C=d()(F,2),n=C[0],B=C[1],X=(0,p.useState)(!1),E=d()(X,2),A=E[0],N=E[1],Y=(0,p.useState)("86"),R=d()(Y,2),b=R[0],q=R[1],_=(0,p.useState)(!1),D=d()(_,2),ee=D[0],se=D[1],re=!1,m,ae=f.Z.useForm(),te=d()(ae,1),i=te[0];(0,p.useEffect)(function(){return function(){clearInterval(m)}},[m]);var ne=function(){var s=59;B(s),m=window.setInterval(function(){s-=1,B(s),s===0&&clearInterval(m)},1e3)},z=function(){var s=i.getFieldValue("password");return s&&s.length>9?"ok":s&&s.length>5?"pass":"poor"},I=(0,g.useRequest)(K,{manual:!0,onSuccess:function(s,a){s.status==="ok"&&(G.ZP.success("\u6CE8\u518C\u6210\u529F\uFF01"),g.history.push({pathname:"/user/register-result",state:{account:a.email}}))}}),ue=I.loading,ie=I.run,oe=function(s){ie(s)},le=function(s,a){var c=Promise;return a&&a!==i.getFieldValue("password")?c.reject("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u5339\u914D!"):c.resolve()},ce=function(s,a){var c=Promise;return a?(A||N(!!a),se(!ee),a.length<6?c.reject(""):(a&&re&&i.validateFields(["confirm"]),c.resolve())):(N(!!a),c.reject("\u8BF7\u8F93\u5165\u5BC6\u7801!"))},de=function(s){q(s)},pe=function(){var s=i.getFieldValue("password"),a=z();return s&&s.length?(0,e.jsx)("div",{className:t["progress-".concat(a)],children:(0,e.jsx)(V.Z,{status:H[a],className:t.progress,strokeWidth:6,percent:s.length*10>100?100:s.length*10,showInfo:!1})}):null};return(0,e.jsxs)("div",{className:t.main,children:[(0,e.jsx)("h3",{children:"\u6CE8\u518C"}),(0,e.jsxs)(f.Z,{form:i,name:"UserRegister",onFinish:oe,children:[(0,e.jsx)(l,{name:"mail",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1\u5730\u5740!"},{type:"email",message:"\u90AE\u7BB1\u5730\u5740\u683C\u5F0F\u9519\u8BEF!"}],children:(0,e.jsx)(o.Z,{size:"large",placeholder:"\u90AE\u7BB1"})}),(0,e.jsx)(M.Z,{getPopupContainer:function(s){return s&&s.parentNode?s.parentNode:s},content:A&&(0,e.jsxs)("div",{style:{padding:"4px 0"},children:[k[z()],pe(),(0,e.jsx)("div",{style:{marginTop:10},children:(0,e.jsx)("span",{children:"\u8BF7\u81F3\u5C11\u8F93\u5165 6 \u4E2A\u5B57\u7B26\u3002\u8BF7\u4E0D\u8981\u4F7F\u7528\u5BB9\u6613\u88AB\u731C\u5230\u7684\u5BC6\u7801\u3002"})})]}),overlayStyle:{width:240},placement:"right",visible:A,children:(0,e.jsx)(l,{name:"password",className:i.getFieldValue("password")&&i.getFieldValue("password").length>0&&t.password,rules:[{validator:ce}],children:(0,e.jsx)(o.Z,{size:"large",type:"password",placeholder:"\u81F3\u5C116\u4F4D\u5BC6\u7801\uFF0C\u533A\u5206\u5927\u5C0F\u5199"})})}),(0,e.jsx)(l,{name:"confirm",rules:[{required:!0,message:"\u786E\u8BA4\u5BC6\u7801"},{validator:le}],children:(0,e.jsx)(o.Z,{size:"large",type:"password",placeholder:"\u786E\u8BA4\u5BC6\u7801"})}),(0,e.jsxs)(L,{compact:!0,children:[(0,e.jsxs)(P.Z,{size:"large",value:b,onChange:de,style:{width:"20%"},children:[(0,e.jsx)(w,{value:"86",children:"+86"}),(0,e.jsx)(w,{value:"87",children:"+87"})]}),(0,e.jsx)(l,{style:{width:"80%"},name:"mobile",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7!"},{pattern:/^\d{11}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF!"}],children:(0,e.jsx)(o.Z,{size:"large",placeholder:"\u624B\u673A\u53F7"})})]}),(0,e.jsxs)(O.Z,{gutter:8,children:[(0,e.jsx)(Z.Z,{span:16,children:(0,e.jsx)(l,{name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801!"}],children:(0,e.jsx)(o.Z,{size:"large",placeholder:"\u9A8C\u8BC1\u7801"})})}),(0,e.jsx)(Z.Z,{span:8,children:(0,e.jsx)(y.Z,{size:"large",disabled:!!n,className:t.getCaptcha,onClick:ne,children:n?"".concat(n," s"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"})})]}),(0,e.jsxs)(l,{children:[(0,e.jsx)(y.Z,{size:"large",loading:ue,className:t.submit,type:"primary",htmlType:"submit",children:(0,e.jsx)("span",{children:"\u6CE8\u518C"})}),(0,e.jsx)(g.Link,{className:t.login,to:"/user/login",children:(0,e.jsx)("span",{children:"\u4F7F\u7528\u5DF2\u6709\u8D26\u6237\u767B\u5F55"})})]})]})]})},Q=J},15746:function(T,h,r){var v=r(21584);h.Z=v.Z}}]);
