"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1658],{86615:function(J,Z,n){var x=n(6495),h=n(47933),E=n(1413),T=n(44925),g=n(85893),y=n(22270),m=n(67294),B=n(64893),M=n(99960),r=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],i=m.forwardRef(function(P,F){var L=P.fieldProps,U=P.options,Y=P.radioType,z=P.layout,Q=P.proFieldProps,S=P.valueEnum,c=(0,T.Z)(P,r);return(0,g.jsx)(M.Z,(0,E.Z)((0,E.Z)({valueType:Y==="button"?"radioButton":"radio",ref:F,valueEnum:(0,y.h)(S,void 0)},c),{},{fieldProps:(0,E.Z)({options:U,layout:z},L),proFieldProps:Q,filedConfig:{customLightMode:!0}}))}),f=m.forwardRef(function(P,F){var L=P.fieldProps,U=P.children;return(0,g.jsx)(h.ZP,(0,E.Z)((0,E.Z)({},L),{},{ref:F,children:U}))}),O=(0,B.G)(f,{valuePropName:"checked",ignoreWidth:!0}),D=O;D.Group=i,D.Button=h.ZP.Button,D.displayName="ProFormComponent",Z.Z=D},90672:function(J,Z,n){var x=n(1413),h=n(44925),E=n(85893),T=n(67294),g=n(99960),y=["fieldProps","proFieldProps"],m=function(M,r){var i=M.fieldProps,f=M.proFieldProps,O=(0,h.Z)(M,y);return(0,E.jsx)(g.Z,(0,x.Z)({ref:r,valueType:"textarea",fieldProps:i,proFieldProps:f},O))};Z.Z=T.forwardRef(m)},5966:function(J,Z,n){var x=n(1413),h=n(44925),E=n(85893),T=n(99960),g=["fieldProps","proFieldProps"],y=["fieldProps","proFieldProps"],m="text",B=function(f){var O=f.fieldProps,D=f.proFieldProps,P=(0,h.Z)(f,g);return(0,E.jsx)(T.Z,(0,x.Z)({valueType:m,fieldProps:O,filedConfig:{valueType:m},proFieldProps:D},P))},M=function(f){var O=f.fieldProps,D=f.proFieldProps,P=(0,h.Z)(f,y);return(0,E.jsx)(T.Z,(0,x.Z)({valueType:"password",fieldProps:O,proFieldProps:D,filedConfig:{valueType:m}},P))},r=B;r.Password=M,r.displayName="ProFormComponent",Z.Z=r},50727:function(J,Z,n){var x=n(82621),h=n(71257),E=n(3169),T=n(71577),g=n(4942),y=n(29439),m=n(44925),B=n(74165),M=n(15861),r=n(1413),i=n(85893),f=n(49101),O=n(97462),D=n(49947),P=n(78775),F=n(26369),L=n(22270),U=n(48171),Y=n(60249),z=n(21770),Q=n(88306),S=n(8880),c=n(67294),se=n(40741),Pe=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],ce=["record","position","creatorButtonText","newRecordType","parentKey","style"],ae=c.createContext(void 0);function le(e){var R=e.children,j=e.record,X=e.position,k=e.newRecordType,p=e.parentKey,N=(0,c.useContext)(ae);return c.cloneElement(R,(0,r.Z)((0,r.Z)({},R.props),{},{onClick:function(){var V=(0,M.Z)((0,B.Z)().mark(function q(ee){var w,G,I,A;return(0,B.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(w=(G=R.props).onClick)===null||w===void 0?void 0:w.call(G,ee);case 2:if(A=s.sent,A!==!1){s.next=5;break}return s.abrupt("return");case 5:N==null||(I=N.current)===null||I===void 0||I.addEditRecord(j,{position:X,newRecordType:k,parentKey:p});case 6:case"end":return s.stop()}},q)}));function K(q){return V.apply(this,arguments)}return K}()}))}function ie(e){var R,j,X=(0,P.YB)(),k=e.onTableChange,p=e.maxLength,N=e.formItemProps,V=e.recordCreatorProps,K=e.rowKey,q=e.controlled,ee=e.defaultValue,w=e.onChange,G=e.editableFormRef,I=(0,m.Z)(e,Pe),A=(0,F.Z)(e.value),H=(0,c.useRef)(),s=(0,c.useRef)();(0,c.useImperativeHandle)(I.actionRef,function(){return H.current});var fe=(0,z.Z)(function(){return e.value||ee||[]},{value:e.value,onChange:e.onChange}),_e=(0,y.Z)(fe,2),d=_e[0],Ee=_e[1],W=c.useMemo(function(){return typeof K=="function"?K:function(u,t){return u[K]||t}},[K]),ue=function(t){if(typeof t=="number"&&!e.name){if(t>=d.length)return t;var o=d&&d[t];return W==null?void 0:W(o,t)}if((typeof t=="string"||t>=d.length)&&e.name){var a=d.findIndex(function(l,_){var v;return(W==null||(v=W(l,_))===null||v===void 0?void 0:v.toString())===(t==null?void 0:t.toString())});return a}return t};(0,c.useImperativeHandle)(G,function(){var u=function(a){var l,_;if(a==null)throw new Error("rowIndex is required");var v=ue(a),C=[e.name,(l=v==null?void 0:v.toString())!==null&&l!==void 0?l:""].flat(1).filter(Boolean);return(_=s.current)===null||_===void 0?void 0:_.getFieldValue(C)},t=function(){var a,l=[e.name].flat(1).filter(Boolean);if(Array.isArray(l)&&l.length===0){var _,v=(_=s.current)===null||_===void 0?void 0:_.getFieldsValue();return Array.isArray(v)?v:Object.keys(v).map(function(C){return v[C]})}return(a=s.current)===null||a===void 0?void 0:a.getFieldValue(l)};return(0,r.Z)((0,r.Z)({},s.current),{},{getRowData:u,getRowsData:t,setRowData:function(a,l){var _,v,C,te;if(a==null)throw new Error("rowIndex is required");var oe=ue(a),ge=[e.name,(_=oe==null?void 0:oe.toString())!==null&&_!==void 0?_:""].flat(1).filter(Boolean),Ze=((v=s.current)===null||v===void 0||(C=v.getFieldsValue)===null||C===void 0?void 0:C.call(v))||{},ye=(0,S.Z)(Ze,ge,(0,r.Z)((0,r.Z)({},u(a)),l||{}));return(te=s.current)===null||te===void 0?void 0:te.setFieldsValue(ye)}})}),(0,c.useEffect)(function(){!e.controlled||d.forEach(function(u,t){var o;(o=s.current)===null||o===void 0||o.setFieldsValue((0,g.Z)({},W(u,t),u))},{})},[d,e.controlled]),(0,c.useEffect)(function(){if(e.name){var u;s.current=e==null||(u=e.editable)===null||u===void 0?void 0:u.form}},[(R=e.editable)===null||R===void 0?void 0:R.form,e.name]);var b=V||{},me=b.record,ne=b.position,De=b.creatorButtonText,he=b.newRecordType,Me=b.parentKey,Oe=b.style,Re=(0,m.Z)(b,ce),ve=ne==="top",$=(0,c.useMemo)(function(){return p&&p<=(d==null?void 0:d.length)?!1:V!==!1&&(0,i.jsx)(le,{record:(0,L.h)(me,d==null?void 0:d.length,d)||{},position:ne,parentKey:(0,L.h)(Me,d==null?void 0:d.length,d),newRecordType:he,children:(0,i.jsx)(T.Z,(0,r.Z)((0,r.Z)({type:"dashed",style:(0,r.Z)({display:"block",margin:"10px 0",width:"100%"},Oe),icon:(0,i.jsx)(f.Z,{})},Re),{},{children:De||X.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[V,p,d==null?void 0:d.length]),Ce=(0,c.useMemo)(function(){return $?ve?{components:{header:{wrapper:function(t){var o,a=t.className,l=t.children;return(0,i.jsxs)("thead",{className:a,children:[l,(0,i.jsxs)("tr",{style:{position:"relative"},children:[(0,i.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:$}),(0,i.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(o=I.columns)===null||o===void 0?void 0:o.length,children:$})]})]})}}}}:{tableViewRender:function(t,o){var a,l;return(0,i.jsxs)(i.Fragment,{children:[(a=(l=e.tableViewRender)===null||l===void 0?void 0:l.call(e,t,o))!==null&&a!==void 0?a:o,$]})}}:{}},[ve,$]),re=(0,r.Z)({},e.editable),Te=(0,U.J)(function(u,t){var o,a,l;if((o=e.editable)===null||o===void 0||(a=o.onValuesChange)===null||a===void 0||a.call(o,u,t),(l=e.onValuesChange)===null||l===void 0||l.call(e,t,u),e.controlled){var _;e==null||(_=e.onChange)===null||_===void 0||_.call(e,t)}});return((e==null?void 0:e.onValuesChange)||((j=e.editable)===null||j===void 0?void 0:j.onValuesChange)||e.controlled&&(e==null?void 0:e.onChange))&&(re.onValuesChange=Te),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ae.Provider,{value:H,children:(0,i.jsx)(se.Z,(0,r.Z)((0,r.Z)((0,r.Z)({search:!1,options:!1,pagination:!1,rowKey:K,revalidateOnFocus:!1},I),Ce),{},{tableLayout:"fixed",actionRef:H,onChange:k,editable:(0,r.Z)((0,r.Z)({},re),{},{formProps:(0,r.Z)({formRef:s},re.formProps)}),dataSource:d,onDataSourceChange:function(t){if(Ee(t),e.name&&ne==="top"){var o,a=(0,S.Z)({},[e.name].flat(1).filter(Boolean),t);(o=s.current)===null||o===void 0||o.setFieldsValue(a)}}}))}),e.name?(0,i.jsx)(O.Z,{name:[e.name],children:function(t){var o,a,l=(0,Q.Z)(t,[e.name].flat(1)),_=l==null?void 0:l.find(function(v,C){return!(0,Y.Z)(v,A==null?void 0:A[C])});return _&&A&&(e==null||(o=e.editable)===null||o===void 0||(a=o.onValuesChange)===null||a===void 0||a.call(o,_,l)),null}}):null]})}function de(e){var R=D.ZP.useFormInstance();return e.name?(0,i.jsx)(h.Z.Item,(0,r.Z)((0,r.Z)({style:{maxWidth:"100%"}},e==null?void 0:e.formItemProps),{},{name:e.name,children:(0,i.jsx)(ie,(0,r.Z)((0,r.Z)({},e),{},{editable:(0,r.Z)((0,r.Z)({},e.editable),{},{form:R})}))})):(0,i.jsx)(ie,(0,r.Z)({},e))}de.RecordCreator=le,Z.Z=de}}]);
