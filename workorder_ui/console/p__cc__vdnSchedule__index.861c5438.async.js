"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8960],{90074:function(de,y,a){a.r(y);var F=a(27424),b=a.n(F),V=a(17061),s=a.n(V),G=a(42122),A=a.n(G),z=a(17156),m=a.n(z),N=a(49101),H=a(73171),d=a(48086),R=a(71577),B=a(50146),M=a(67294),p=a(9459),J=a(88601),Q=a(68137),X=a(16894),T=a(52120),Y=a(99427),x=a(33936),r=a(85893),q=function(){var P=m()(s()().mark(function h(n){var l,c;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=d.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,e.next=4,(0,T.Vr)(A()({},n));case 4:return c=e.sent,l(),c.code===200?d.ZP.success("\u6DFB\u52A0\u6210\u529F"):d.ZP.error(c.msg),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(1),l(),d.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),e.abrupt("return",!1);case 15:case"end":return e.stop()}},h,null,[[1,10]])}));return function(n){return P.apply(this,arguments)}}(),ee=function(){var P=m()(s()().mark(function h(n){var l,c;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=d.ZP.loading("\u6B63\u5728\u914D\u7F6E"),e.prev=1,e.next=4,(0,T.RG)(n);case 4:return c=e.sent,l(),c.code===200?d.ZP.success("\u914D\u7F6E\u6210\u529F"):d.ZP.error(c.msg),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(1),l(),d.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),e.abrupt("return",!1);case 15:case"end":return e.stop()}},h,null,[[1,10]])}));return function(n){return P.apply(this,arguments)}}(),L=function(){var P=m()(s()().mark(function h(n){var l,c;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=d.ZP.loading("\u6B63\u5728\u5220\u9664"),n){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,e.next=6,(0,T.gI)(n.map(function(i){return i.id}).join(","));case 6:return c=e.sent,l(),c.code===200?d.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):d.ZP.error(c.msg),e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e.catch(3),l(),d.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),e.abrupt("return",!1);case 17:case"end":return e.stop()}},h,null,[[3,12]])}));return function(n){return P.apply(this,arguments)}}(),re=function(){var P=m()(s()().mark(function h(n){var l,c,_;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(l=d.ZP.loading("\u6B63\u5728\u5220\u9664"),n){i.next=3;break}return i.abrupt("return",!0);case 3:return i.prev=3,c=[n.id],i.next=7,(0,T.gI)(c.join(","));case 7:return _=i.sent,l(),_.code===200?d.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):d.ZP.error(_.msg),i.abrupt("return",!0);case 13:return i.prev=13,i.t0=i.catch(3),l(),d.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),i.abrupt("return",!1);case 18:case"end":return i.stop()}},h,null,[[3,13]])}));return function(n){return P.apply(this,arguments)}}(),ae=function(){var h=(0,M.useRef)(),n=(0,M.useRef)(),l=(0,M.useState)([]),c=b()(l,2),_=c[0],e=c[1],i=(0,M.useState)(),W=b()(i,2),se=W[0],k=W[1],ne=(0,M.useState)(!1),U=b()(ne,2),te=U[0],I=U[1],ue=(0,M.useState)([]),K=b()(ue,2),$=K[0],le=K[1],C=(0,p.useAccess)(),ce=(0,p.useIntl)();(0,M.useEffect)(function(){(0,x.zP)("sys_normal_disable").then(function(E){if(E.code===200){var f={};E.data.forEach(function(t){f[t.dictValue]=t.dictLabel}),le(f)}})},[]);var ie=[{title:(0,r.jsx)(p.FormattedMessage,{id:"cc.VdnSchedule.VdnScheduleName",defaultMessage:"\u516C\u53F8\u540D\u79F0"}),dataIndex:"name",valueType:"text",width:"30%"},{title:(0,r.jsx)(p.FormattedMessage,{id:"cc.VdnSchedule.status",defaultMessage:"\u72B6\u6001"}),dataIndex:"status",valueType:"select",valueEnum:$},{title:(0,r.jsx)(p.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",width:"15%",valueType:"option",render:function(f,t){return[(0,r.jsx)(R.Z,{type:"link",size:"small",hidden:!C.hasPerms("cc:VdnSchedule:edit"),onClick:function(){I(!0),k(t)},children:(0,r.jsx)(p.FormattedMessage,{id:"pages.searchTable.edit",defaultMessage:"\u7F16\u8F91"})},"edit"),(0,r.jsx)(R.Z,{type:"link",size:"small",danger:!0,hidden:!C.hasPerms("cc:VdnSchedule:remove"),onClick:m()(s()().mark(function u(){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:B.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var v=m()(s()().mark(function S(){var D;return s()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,re(t);case 2:D=O.sent,D&&n.current&&n.current.reload();case 4:case"end":return O.stop()}},S)}));function w(){return v.apply(this,arguments)}return w}()});case 1:case"end":return o.stop()}},u)})),children:(0,r.jsx)(p.FormattedMessage,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})},"batchRemove")]}}];return(0,r.jsxs)(Q.Z,{children:[(0,r.jsx)("div",{style:{width:"100%",float:"right"},children:(0,r.jsx)(X.ZP,{headerTitle:ce.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:n,formRef:h,rowKey:"postId",search:{labelWidth:120},toolBarRender:function(){return[(0,r.jsxs)(R.Z,{type:"primary",hidden:!C.hasPerms("cc:VdnSchedule:add"),onClick:m()(s()().mark(function f(){return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:k(void 0),I(!0);case 2:case"end":return u.stop()}},f)})),children:[(0,r.jsx)(N.Z,{})," ",(0,r.jsx)(p.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"add"),(0,r.jsxs)(R.Z,{type:"primary",hidden:(_==null?void 0:_.length)===0||!C.hasPerms("cc:VdnSchedule:remove"),onClick:m()(s()().mark(function f(){var t,u,g;return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,L(_);case 2:t=v.sent,t&&(e([]),(u=n.current)===null||u===void 0||(g=u.reloadAndRest)===null||g===void 0||g.call(u));case 4:case"end":return v.stop()}},f)})),children:[(0,r.jsx)(H.Z,{}),(0,r.jsx)(p.FormattedMessage,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})]},"remove")]},request:function(f){return(0,T.gG)(A()({},f)).then(function(t){return{data:t.rows,total:t.total,success:!0}})},columns:ie,rowSelection:{onChange:function(f,t){e(t)}}},"postList")}),(_==null?void 0:_.length)>0&&(0,r.jsx)(J.Sc,{extra:(0,r.jsxs)("div",{children:[(0,r.jsx)(p.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"\u5DF2\u9009\u62E9"}),(0,r.jsx)("a",{style:{fontWeight:600},children:_.length}),(0,r.jsx)(p.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,r.jsx)(R.Z,{hidden:!C.hasPerms("cc:VdnSchedule:remove"),onClick:m()(s()().mark(function E(){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:B.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var u=m()(s()().mark(function o(){var v,w,S,D,Z;return s()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return e([]),(v=n.current)===null||v===void 0||(w=v.reloadAndRest)===null||w===void 0||w.call(v),j.next=4,L(_);case 4:S=j.sent,S&&(e([]),(D=n.current)===null||D===void 0||(Z=D.reloadAndRest)===null||Z===void 0||Z.call(D));case 6:case"end":return j.stop()}},o)}));function g(){return u.apply(this,arguments)}return g}()});case 1:case"end":return t.stop()}},E)})),children:(0,r.jsx)(p.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"\u6279\u91CF\u5220\u9664"})},"remove")}),(0,r.jsx)(Y.Z,{onSubmit:function(){var E=m()(s()().mark(function f(t){var u;return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(u=!1,!t.id){o.next=7;break}return o.next=4,ee(A()({},t));case 4:u=o.sent,o.next=10;break;case 7:return o.next=9,q(A()({},t));case 9:u=o.sent;case 10:u&&(I(!1),k(void 0),n.current&&n.current.reload());case 11:case"end":return o.stop()}},f)}));return function(f){return E.apply(this,arguments)}}(),onCancel:function(){I(!1),k(void 0)},visible:te,values:se||{},statusOptions:$})]})};y.default=ae}}]);
