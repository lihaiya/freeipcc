"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6017],{68137:function(lt,z,a){var G=a(88601),I=a(85893),S=function(T){return(0,I.jsx)(G._z,{content:T.children})};z.Z=S},31650:function(lt,z,a){a.r(z),a.d(z,{default:function(){return Ot}});var G=a(27424),I=a.n(G),S=a(67294),X=a(17061),T=a.n(X),ct=a(17156),dt=a.n(ct),ut=a(58370);function ht(){return E.apply(this,arguments)}function E(){return E=dt()(T()().mark(function c(){return T()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,ut.Z)("/api/monitor/cache",{method:"GET"}));case 1:case"end":return s.stop()}},c)})),E.apply(this,arguments)}var Y=a(71230),P=a(15746),M=a(91894),ft=a(64411),Z={card:"card____mwqo",miniChart:"miniChart___szc0V",chartContent:"chartContent___D486p",chartLoading:"chartLoading___PtRUz"},pt=a(68137),v=a(63012),vt=a(42122),R=a.n(vt),mt=a(56690),U=a.n(mt),gt=a(89728),k=a.n(gt),xt=a(66115),m=a.n(xt),yt=a(61655),O=a.n(yt),Ct=a(26389),K=a.n(Ct),St=a(38416),f=a.n(St),e=a(85893);function w(c){var r=c.style;r.height="100%";var s=parseInt("".concat(getComputedStyle(c).height),10),t=parseInt("".concat(getComputedStyle(c).paddingTop),10)+parseInt("".concat(getComputedStyle(c).paddingBottom),10);return s-t}function b(c){if(!c)return 0;var r=c,s=w(r),t=r.parentNode;return t&&(s=w(t)),s}function jt(){return function(c){var r=function(s){O()(i,s);var t=K()(i);function i(){var d;U()(this,i);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return d=t.call.apply(t,[this].concat(o)),f()(m()(d),"state",{computedHeight:0}),f()(m()(d),"root",null),f()(m()(d),"handleRoot",function(h){d.root=h}),d}return k()(i,[{key:"componentDidMount",value:function(){var n=this.props.height;if(!n&&this.root){var o=b(this.root);this.setState({computedHeight:o}),o<1&&(o=b(this.root),this.setState({computedHeight:o}))}}},{key:"render",value:function(){var n=this.props.height,o=this.state.computedHeight,l=n||o;return(0,e.jsx)("div",{ref:this.handleRoot,children:l>0&&(0,e.jsx)(c,R()(R()({},this.props),{},{height:l}))})}}]),i}(S.Component);return r}}var Ft=jt,q=v.Guide.Arc,Dt=v.Guide.Html,V=v.Guide.Line,It=function(r){switch(r){case"2":return"\u5DEE";case"4":return"\u4E2D";case"6":return"\u826F";case"8":return"\u4F18";default:return""}};v.Shape.registerShape&&v.Shape.registerShape("point","pointer",{drawShape:function(r,s){var t=r.points[0];t=this.parsePoint(t);var i=this.parsePoint({x:0,y:0});return s.addShape("line",{attrs:{x1:i.x,y1:i.y,x2:t.x,y2:t.y,stroke:r.color,lineWidth:2,lineCap:"round"}}),s.addShape("circle",{attrs:{x:i.x,y:i.y,r:6,stroke:r.color,lineWidth:3,fill:"#fff"}})}});var Ht=function(r){var s=r.title,t=r.height,i=t===void 0?1:t,d=r.percent,n=r.forceFit,o=n===void 0?!0:n,l=r.formatter,h=l===void 0?It:l,g=r.color,p=g===void 0?"#2F9CFF":g,x=r.bgColor,A=x===void 0?"#F0F2F5":x,F={value:{type:"linear",min:0,max:10,tickCount:6,nice:!0}},D=[{value:d/10}],H=function(){return`
  <div style="width: 300px;text-align: center;font-size: 12px!important;">
    <div style="font-size: 14px; color: rgba(0,0,0,0.43);margin: 0;">`.concat(s,`</div>
    <div style="font-size: 24px;color: rgba(0,0,0,0.85);margin: 0;">
      `).concat((D[0].value*10).toFixed(2),`%
    </div>
  </div>`)},u={fontSize:12,fill:"rgba(0, 0, 0, 0.65)",textAlign:"center"};return(0,e.jsxs)(v.Chart,{height:i,data:D,scale:F,padding:[-16,0,16,0],forceFit:o,children:[(0,e.jsx)(v.Coord,{type:"polar",startAngle:-1.25*Math.PI,endAngle:.25*Math.PI,radius:.8}),(0,e.jsx)(v.Axis,{name:"1",line:void 0}),(0,e.jsx)(v.Axis,{line:void 0,tickLine:void 0,subTickLine:void 0,name:"value",zIndex:2,label:{offset:-12,formatter:h,textStyle:u}}),(0,e.jsxs)(v.Guide,{children:[(0,e.jsx)(V,{start:[3,.905],end:[3,.85],lineStyle:{stroke:p,lineDash:void 0,lineWidth:2}}),(0,e.jsx)(V,{start:[5,.905],end:[5,.85],lineStyle:{stroke:p,lineDash:void 0,lineWidth:3}}),(0,e.jsx)(V,{start:[7,.905],end:[7,.85],lineStyle:{stroke:p,lineDash:void 0,lineWidth:3}}),(0,e.jsx)(q,{start:[0,.965],end:[10,.965],style:{stroke:A,lineWidth:10}}),(0,e.jsx)(q,{start:[0,.965],end:[D[0].value,.965],style:{stroke:p,lineWidth:10}}),(0,e.jsx)(Dt,{position:["50%","95%"],html:H()})]}),(0,e.jsx)(v.Geom,{line:!1,type:"point",position:"value*1",shape:"pointer",color:p,active:!1})]})},At=Ft()(Ht),Lt=a(63531),Nt=a(91296),$t=a.n(Nt),zt=a(27049),Tt=a(46618),Rt=a.n(Tt),Wt=a(94184),Bt=a.n(Wt);function _(c){var r=c.style;r.height="100%";var s=parseInt("".concat(getComputedStyle(c).height),10),t=parseInt("".concat(getComputedStyle(c).paddingTop),10)+parseInt("".concat(getComputedStyle(c).paddingBottom),10);return s-t}function tt(c){if(!c)return 0;var r=c,s=_(r),t=r.parentNode;return t&&(s=_(t)),s}function Gt(){return function(c){var r=function(s){O()(i,s);var t=K()(i);function i(){var d;U()(this,i);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return d=t.call.apply(t,[this].concat(o)),f()(m()(d),"state",{computedHeight:0}),f()(m()(d),"root",void 0),f()(m()(d),"handleRoot",function(h){d.root=h}),d}return k()(i,[{key:"componentDidMount",value:function(){var n=this.props.height;if(!n){var o=tt(this.root);this.setState({computedHeight:o}),o<1&&(o=tt(this.root),this.setState({computedHeight:o}))}}},{key:"render",value:function(){var n=this.props.height,o=this.state.computedHeight,l=n||o;return(0,e.jsx)("div",{ref:this.handleRoot,children:l>0&&(0,e.jsx)(c,R()(R()({},this.props),{},{height:l}))})}}]),i}(S.Component);return r}}var Et=Gt,j={miniChart:"miniChart___Kkik7",chartContent:"chartContent___BysqS",chartLoading:"chartLoading___L47av"},Pt=function(c){O()(s,c);var r=K()(s);function s(){var t;U()(this,s);for(var i=arguments.length,d=new Array(i),n=0;n<i;n++)d[n]=arguments[n];return t=r.call.apply(r,[this].concat(d)),f()(m()(t),"state",{legendData:[],legendBlock:!1}),f()(m()(t),"requestRef",void 0),f()(m()(t),"root",void 0),f()(m()(t),"chart",void 0),f()(m()(t),"resize",$t()(function(){var o=t.props.hasLegend,l=t.state.legendBlock;if(!o||!t.root){window.removeEventListener("resize",t.resize);return}t.root&&t.root.parentNode&&t.root.parentNode.clientWidth<=380?l||t.setState({legendBlock:!0}):l&&t.setState({legendBlock:!1})},400)),f()(m()(t),"getG2Instance",function(o){t.chart=o,requestAnimationFrame(function(){t.getLegendData(),t.resize()})}),f()(m()(t),"getLegendData",function(){if(!!t.chart){var o=t.chart.getAllGeoms()[0];if(!!o){var l=o.get("dataArray")||[],h=l.map(function(g){var p=g[0]._origin;return p.color=g[0].color,p.checked=!0,p});t.setState({legendData:h})}}}),f()(m()(t),"handleRoot",function(o){t.root=o}),f()(m()(t),"handleLegendClick",function(o,l){var h=o;h.checked=!h.checked;var g=t.state.legendData;g[l]=h;var p=g.filter(function(x){return x.checked}).map(function(x){return x.x});t.chart&&t.chart.filter("x",function(x){return p.indexOf("".concat(x))>-1}),t.setState({legendData:g})}),t}return k()(s,[{key:"componentDidMount",value:function(){var i=this;window.addEventListener("resize",function(){i.requestRef=requestAnimationFrame(function(){return i.resize()})},{passive:!0})}},{key:"componentDidUpdate",value:function(i){var d=this.props.data;d!==i.data&&this.getLegendData()}},{key:"componentWillUnmount",value:function(){this.requestRef&&window.cancelAnimationFrame(this.requestRef),window.removeEventListener("resize",this.resize),this.resize&&this.resize.cancel()}},{key:"render",value:function(){var i,d=this,n=this.props,o=n.valueFormat,l=n.subTitle,h=n.total,g=n.hasLegend,p=g===void 0?!1:g,x=n.className,A=n.style,F=n.height,D=F===void 0?0:F,H=n.forceFit,u=H===void 0?!0:H,y=n.percent,J=n.color,L=n.inner,Kt=L===void 0?.75:L,et=n.animate,Vt=et===void 0?!0:et,Jt=n.colors,at=n.lineWidth,Qt=at===void 0?1:at,nt=this.state,Xt=nt.legendData,Yt=nt.legendBlock,wt=Bt()(j.pie,x,(i={},f()(i,j.hasLegend,!!p),f()(i,j.legendBlock,Yt),i)),Q=this.props,bt=Q.data,ot=Q.selected,qt=ot===void 0?!0:ot,rt=Q.tooltip,_t=rt===void 0?!0:rt,W=bt||[],B=qt,N=_t,te=Jt;W=W||[],B=B||!0,N=N||!0;var it,ee={x:{type:"cat",range:[0,1]},y:{min:0}};(y||y===0)&&(B=!1,N=!1,it=function($){return $==="\u5360\u6BD4"?J||"rgba(24, 144, 255, 0.85)":"#F0F2F5"},W=[{x:"\u5360\u6BD4",y:parseFloat("".concat(y))},{x:"\u53CD\u6BD4",y:100-parseFloat("".concat(y))}]);var ae=["x*percent",function(C,$){return{name:C,value:"".concat(($*100).toFixed(2),"%")}}],ne=[12,0,12,0],st=new Lt.DataView;return st.source(W).transform({type:"percent",field:"y",dimension:"x",as:"percent"}),(0,e.jsxs)("div",{ref:this.handleRoot,className:wt,style:A,children:[(0,e.jsx)(Rt(),{maxFontSize:25,children:(0,e.jsxs)("div",{className:j.chart,children:[(0,e.jsxs)(v.Chart,{scale:ee,height:D,forceFit:u,data:st,padding:ne,animate:Vt,onGetG2Instance:this.getG2Instance,children:[!!N&&(0,e.jsx)(v.Tooltip,{showTitle:!1}),(0,e.jsx)(v.Coord,{type:"theta",innerRadius:Kt}),(0,e.jsx)(v.Geom,{style:{lineWidth:Qt,stroke:"#fff"},tooltip:N?ae:void 0,type:"intervalStack",position:"percent",color:["x",y||y===0?it:te],selected:B})]}),(l||h)&&(0,e.jsxs)("div",{className:j.total,children:[l&&(0,e.jsx)("h4",{className:"pie-sub-title",children:l}),h&&(0,e.jsx)("div",{className:"pie-stat",children:typeof h=="function"?h():h})]})]})}),p&&(0,e.jsx)("ul",{className:j.legend,children:Xt.map(function(C,$){return(0,e.jsxs)("li",{onClick:function(){return d.handleLegendClick(C,$)},children:[(0,e.jsx)("span",{className:j.dot,style:{backgroundColor:C.checked?C.color:"#aaa"}}),(0,e.jsx)("span",{className:j.legendTitle,children:C.x}),(0,e.jsx)(zt.Z,{type:"vertical"}),(0,e.jsx)("span",{className:j.percent,children:"".concat((Number.isNaN(C.percent)?0:C.percent*100).toFixed(2),"%")}),(0,e.jsx)("span",{className:j.value,children:o?o(C.y):C.y})]},C.x)})})]})}}]),s}(S.Component),Mt=Et()(Pt),Zt=[{title:"col1",dataIndex:"col1",key:"col1"},{title:"col2",dataIndex:"col2",key:"col2"},{title:"col3",dataIndex:"col3",key:"col3"},{title:"col4",dataIndex:"col4",key:"col4"},{title:"col5",dataIndex:"col5",key:"col5"},{title:"col6",dataIndex:"col6",key:"col6"},{title:"col7",dataIndex:"col7",key:"col7"},{title:"col8",dataIndex:"col8",key:"col8"}],Ut=function(r){switch(r){case"10":return"100%";case"8":return"80%";case"6":return"60%";case"4":return"40%";case"2":return"20%";case"0":return"0%";default:return""}},kt=function(){var r=(0,S.useState)([]),s=I()(r,2),t=s[0],i=s[1],d=(0,S.useState)([]),n=I()(d,2),o=n[0],l=n[1],h=(0,S.useState)([]),g=I()(h,2),p=g[0],x=g[1],A=(0,S.useState)([]),F=I()(A,2),D=F[0],H=F[1];return(0,S.useEffect)(function(){ht().then(function(u){if(u.code===200){var y=[];y.push({col1:"Redis\u7248\u672C",col2:u.data.info.redis_version,col3:"\u8FD0\u884C\u6A21\u5F0F",col4:u.data.info.redis_mode==="standalone"?"\u5355\u673A":"\u96C6\u7FA4",col5:"\u7AEF\u53E3",col6:u.data.info.tcp_port,col7:"\u5BA2\u6237\u7AEF\u6570",col8:u.data.info.connected_clients}),y.push({col1:"\u8FD0\u884C\u65F6\u95F4(\u5929)",col2:u.data.info.uptime_in_days,col3:"\u4F7F\u7528\u5185\u5B58",col4:u.data.info.used_memory_human,col5:"\u4F7F\u7528CPU",col6:"".concat(u.data.info.used_cpu_user_children,"%"),col7:"\u5185\u5B58\u914D\u7F6E",col8:u.data.info.maxmemory_human}),y.push({col1:"AOF\u662F\u5426\u5F00\u542F",col2:u.data.info.aof_enabled==="0"?"\u5426":"\u662F",col3:"RDB\u662F\u5426\u6210\u529F",col4:u.data.info.rdb_last_bgsave_status,col5:"Key\u6570\u91CF",col6:u.data.dbSize,col7:"\u7F51\u7EDC\u5165\u53E3/\u51FA\u53E3",col8:"".concat(u.data.info.instantaneous_input_kbps,"/").concat(u.data.info.instantaneous_output_kbps,"kps")}),i(y);var J=u.data.commandStats.map(function(L){return{x:L.name,y:Number(L.value)}});H(J),x(u.data.info.used_memory_human),l(u.data.info.used_memory/u.data.info.total_system_memory)}})},[]),(0,e.jsxs)(pt.Z,{children:[(0,e.jsx)(Y.Z,{gutter:[24,24],children:(0,e.jsx)(P.Z,{span:24,children:(0,e.jsx)(M.Z,{title:"\u57FA\u672C\u4FE1\u606F",className:Z.card,children:(0,e.jsx)(ft.Z,{pagination:!1,showHeader:!1,dataSource:t,columns:Zt})})})}),(0,e.jsxs)(Y.Z,{gutter:[24,24],children:[(0,e.jsx)(P.Z,{span:12,children:(0,e.jsx)(M.Z,{title:"\u547D\u4EE4\u7EDF\u8BA1",className:Z.card,children:(0,e.jsx)(Mt,{hasLegend:!0,data:D,height:320,lineWidth:4})})}),(0,e.jsx)(P.Z,{span:12,children:(0,e.jsx)(M.Z,{title:"\u5185\u5B58\u4FE1\u606F",className:Z.card,children:(0,e.jsx)(At,{title:p,height:320,percent:o,formatter:Ut})})})]})]})},Ot=kt}}]);
