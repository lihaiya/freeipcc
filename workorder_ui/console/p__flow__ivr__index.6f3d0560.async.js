(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[265],{76406:function(V,_,v){"use strict";v.r(_),v.d(_,{Demo:function(){return _e},default:function(){return $r}});var L=v(17061),r=v.n(L),ie=v(17156),g=v.n(ie),$=v(67294),e=v(61934),X="DND_NDOE",j="GROUP_NODE_RENDER_ID",fe=180,me=36,Ne=v(32779),Oe=v(73218),he=v(15873),Te=v(57119),De=v(68628),Pe=v(73888),T=v(85893),Ae={fontSize:"16px",color:"#3057e3"},ge=function(a){if(a.hide)return null;switch(a.status){case e.yc.StatusEnum.PROCESSING:return(0,T.jsx)(Ne.Z,{spin:!0,style:{color:"#c1cdf7",fontSize:"16px"}});case e.yc.StatusEnum.ERROR:return(0,T.jsx)(Oe.Z,{style:{color:"#ff4d4f",fontSize:"16px"}});case e.yc.StatusEnum.SUCCESS:return(0,T.jsx)(he.Z,{style:{color:"#39ca74cc",fontSize:"16px"}});case e.yc.StatusEnum.WARNING:return(0,T.jsx)(Te.Z,{style:{color:"#faad14",fontSize:"16px"}});case e.yc.StatusEnum.DEFAULT:return(0,T.jsx)(De.Z,{style:{color:"#d9d9d9",fontSize:"16px"}});default:return null}},ke=function(a){return(0,T.jsxs)("div",{className:"xflow-algo-node ".concat(a.isNodeTreePanel?"panel-node":""),children:[(0,T.jsx)("span",{className:"icon",children:(0,T.jsx)(Pe.Z,{style:Ae})}),(0,T.jsx)("span",{className:"label",children:a.data.label}),(0,T.jsx)("span",{className:"status",children:(0,T.jsx)(ge,{status:a.data&&a.data.status,hide:a.isNodeTreePanel})})]})},ce=v(18267),xe=v(18095),d=function(a){var i=a.cell,o=(0,e.XZ)(),t=a.data.isCollapsed||!1,u=function(){o.executeCommand(e.dV.COLLAPSE_GROUP.id,{nodeId:i.id,isCollapsed:!1,collapsedSize:{width:200,height:40}})},l=function(){o.executeCommand(e.dV.COLLAPSE_GROUP.id,{nodeId:i.id,isCollapsed:!0,collapsedSize:{width:200,height:40},gap:3})};return(0,T.jsx)("div",{className:"xflow-group-node",children:(0,T.jsxs)("div",{className:"xflow-group-header",children:[(0,T.jsx)("div",{className:"header-left",children:a.data.label}),(0,T.jsxs)("div",{className:"header-right",children:[t&&(0,T.jsx)(ce.Z,{onClick:u}),!t&&(0,T.jsx)(xe.Z,{onClick:l})]})]})})},k=(0,e.vD)(function(c,a){var i=a.getValue();console.log("get main props",i),c.setRegisterHook(function(o){var t=[o.reactNodeRender.registerHook({name:"add react node",handler:function(){var l=g()(r()().mark(function f(n){return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:n.set(X,ke),n.set(j,d);case 2:case"end":return y.stop()}},f)}));function p(f){return l.apply(this,arguments)}return p}()}),o.graphOptions.registerHook({name:"custom-x6-options",after:"dag-extension-x6-options",handler:function(){var l=g()(r()().mark(function f(n){return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:n.grid=!1,n.keyboard={enabled:!0};case 2:case"end":return y.stop()}},f)}));function p(f){return l.apply(this,arguments)}return p}()}),o.x6Events.registerHook({name:"add",handler:function(){var l=g()(r()().mark(function f(n){return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:n.push({eventName:"node:moved",callback:function(S,O){var x=S.node;O.executeCommand(e.cE.MOVE_NODE.id,{id:x.id,position:x.getPosition()})}});case 1:case"end":return y.stop()}},f)}));function p(f){return l.apply(this,arguments)}return p}()})],u=new e.K4;return u.pushAll(t),u})}),R=v(42122),s=v.n(R),P=v(27424),W=v.n(P),F=v(58370);function ee(c){return H.apply(this,arguments)}function H(){return H=g()(r()().mark(function c(a){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,F.Z)("/api/cc/ivrFlow",{method:"POST",data:a}));case 1:case"end":return o.stop()}},c)})),H.apply(this,arguments)}function J(c){return(0,F.Z)("/api/cc/ivrFlow/".concat(c),{method:"GET"})}var z=v(48086),M;(function(c){var a=c.NODE_COMMON_PROPS={renderKey:X,width:fe,height:me},i=c.queryGraphMeta=function(){var h=g()(r()().mark(function b(m){return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return console.log("queryMeta",m),C.abrupt("return",s()(s()({},m),{},{flowId:m.meta.flowId}));case 2:case"end":return C.stop()}},b)}));return function(b){return h.apply(this,arguments)}}(),o=c.loadGraphData=function(){var h=g()(r()().mark(function b(m){var N,C,G;return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return console.log("-------------------meta=",m.flowId),N=parseInt(m.flowId),A.next=4,J(N);case 4:if(C=A.sent,C.code!==200){A.next=10;break}return G=JSON.parse(C.data.content)||{nodes:[],edges:[]},A.abrupt("return",G);case 10:z.ZP.error(C.msg);case 11:return A.abrupt("return","");case 12:case"end":return A.stop()}},b)}));return function(b){return h.apply(this,arguments)}}(),t=c.saveGraphData=function(){var h=g()(r()().mark(function b(m,N){var C,G,D;return r()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return console.log("saveGraphData api",m,N),console.log("saveGraphData json",JSON.stringify(N)),C=parseInt(m.flowId),G={id:C,content:JSON.stringify(N)},Y.next=6,ee(s()({},G));case 6:return D=Y.sent,D.code===200?z.ZP.success("\u4FDD\u5B58\u6210\u529F"):z.ZP.error(D.msg),Y.abrupt("return",{success:!0,data:N});case 9:case"end":return Y.stop()}},b)}));return function(b,m){return h.apply(this,arguments)}}(),u=c.deployDagService=function(){var h=g()(r()().mark(function b(m,N){return r()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return console.log("deployService api",m,N),G.abrupt("return",{success:!0,data:N});case 2:case"end":return G.stop()}},b)}));return function(b,m){return h.apply(this,arguments)}}(),l=c.addNode=function(){var h=g()(r()().mark(function b(m){var N,C,G,D,A,Y,Be;return r()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return console.info("addNode service running, add node:",m),N=[{type:e.Ak.AnchorType.INPUT,group:e.Ak.AnchorGroup.LEFT,tooltip:"\u8F93\u5165\u68691"},{type:e.Ak.AnchorType.INPUT,group:e.Ak.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u68692"},{type:e.Ak.AnchorType.INPUT,group:e.Ak.AnchorGroup.RIGHT,tooltip:"\u8F93\u5165\u68693"},{type:e.Ak.AnchorType.OUTPUT,group:e.Ak.AnchorGroup.BOTTOM,tooltip:"\u8F93\u51FA\u6869"}],C=m.nodeConfig,G=C.id,D=C.ports,A=C.groupChildren,Y=G||(0,e.k$)(),Be=s()(s()(s()({},a),m.nodeConfig),{},{id:Y,ports:D.map(function(Lr){return s()(s()({},Lr),{},{id:(0,e.k$)()})})}),A&&A.length&&(Be.ports=[]),Me.abrupt("return",Be);case 7:case"end":return Me.stop()}},b)}));return function(b){return h.apply(this,arguments)}}(),p=c.renameNode=function(){var h=g()(r()().mark(function b(m,N,C){return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return console.log("rename node",N,m,C),D.abrupt("return",{err:null,nodeName:m});case 2:case"end":return D.stop()}},b)}));return function(b,m,N){return h.apply(this,arguments)}}(),f=c.delNode=function(){var h=g()(r()().mark(function b(m){return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return console.info("delNode service running, del node:",m.nodeConfig.id),C.abrupt("return",!0);case 2:case"end":return C.stop()}},b)}));return function(b){return h.apply(this,arguments)}}(),n=c.addEdge=function(){var h=g()(r()().mark(function b(m){var N;return r()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return console.info("addEdge service running, add edge:",m),N=m.edgeConfig,G.abrupt("return",s()(s()({},N),{},{id:(0,e.k$)()}));case 3:case"end":return G.stop()}},b)}));return function(b){return h.apply(this,arguments)}}(),E=c.delEdge=function(){var h=g()(r()().mark(function b(m){return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return console.info("delEdge service running, del edge:",m),C.abrupt("return",!0);case 2:case"end":return C.stop()}},b)}));return function(b){return h.apply(this,arguments)}}(),y=0,w={},S=e.yc.StatusEnum.DEFAULT,O=c.graphStatusService=g()(r()().mark(function h(){return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return y<4?(w["node".concat(y)]={status:e.yc.StatusEnum.SUCCESS},w["node".concat(y+1)]={status:e.yc.StatusEnum.PROCESSING},y+=1,S=e.yc.StatusEnum.PROCESSING):(y=0,w.node4={status:e.yc.StatusEnum.SUCCESS},S=e.yc.StatusEnum.SUCCESS),m.abrupt("return",{graphStatus:S,statusMap:w});case 2:case"end":return m.stop()}},h)})),x=c.stopGraphStatusService=g()(r()().mark(function h(){return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return Object.entries(w).forEach(function(N){var C=W()(N,2),G=C[1],D=G,A=D.status;A===e.yc.StatusEnum.PROCESSING&&(G.status=e.yc.StatusEnum.ERROR)}),m.abrupt("return",{graphStatus:e.yc.StatusEnum.ERROR,statusMap:w});case 2:case"end":return m.stop()}},h)}))})(M||(M={}));var ne=v(14315),Q=v.n(ne),te=v(56690),q=v.n(te),re=v(89728),le=v.n(re),ye=v(38416),K=v.n(ye),Ge=v(46877),pe=v.n(Ge),oe=v(55827),I;(function(c){var a="\u8282\u70B9\u64CD\u4F5C",i=c.TEST_ASYNC_CMD={id:"xflow:async-cmd",label:"\u5F02\u6B65\u8BF7\u6C42",category:a},o=c.SHOW_RENAME_MODAL={id:"xflow:rename-node-modal",label:"\u6253\u5F00\u91CD\u547D\u540D\u5F39\u7A97",category:a},t=c.DEPLOY_SERVICE={id:"xflow:deploy-service",label:"\u90E8\u7F72\u670D\u52A1",category:a}})(I||(I={}));var U,B,Re,Ee,Ue,Fe=e.Nf.inject,Ye=e.Nf.injectable,Ce;(function(c){var a=c.command=I.TEST_ASYNC_CMD,i=c.hookKey="testCmd"})(Ce||(Ce={}));var Xe=(U=Ye(),B=Fe(e.KV),U(Re=(Ee=function(){function c(){var a=this;q()(this,c),Q()(this,"contextProvider",Ue,this),K()(this,"execute",g()(r()().mark(function i(){var o,t,u,l,p,f,n;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return o=a.contextProvider(),t=o.getHooks(),u=o.getArgs(),l=u.args,p=u.hooks,y.next=5,o.getX6Graph();case 5:return f=y.sent,y.next=8,t.testCmd.call(l,function(){var w=g()(r()().mark(function S(O){var x,h,b,m;return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return x=O.commandService,h=O.modelService,b=O.graphMeta,m=O.test,console.log(f,x,h,b,m),C.abrupt("return",{test:!0});case 3:case"end":return C.stop()}},S)}));return function(S){return w.apply(this,arguments)}}(),p);case 8:return n=y.sent,o.setResult(n),y.abrupt("return",a);case 11:case"end":return y.stop()}},i)}))),K()(this,"undo",g()(r()().mark(function i(){var o;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a.isUndoable()&&(o=a.contextProvider(),o.undo()),u.abrupt("return",a);case 2:case"end":return u.stop()}},i)}))),K()(this,"redo",g()(r()().mark(function i(){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.isUndoable()){t.next=3;break}return t.next=3,a.execute();case 3:return t.abrupt("return",a);case 4:case"end":return t.stop()}},i)})))}return le()(c,[{key:"isUndoable",value:function(){var i=this.contextProvider();return i.isUndoable()}}]),c}(),Ue=pe()(Ee.prototype,"contextProvider",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee))||Re),Ze,Z,je,Se,Ve,be;(function(c){var a=c.command=I.DEPLOY_SERVICE,i=c.hookKey="deployDag"})(be||(be={}));var He=(Ze=e.Nf.injectable(),Z=e.Nf.inject(e.KV),Ze(je=(Se=function(){function c(){var a=this;q()(this,c),Q()(this,"contextProvider",Ve,this),K()(this,"execute",g()(r()().mark(function i(){var o,t,u,l,p;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.contextProvider(),t=o.getArgs(),u=t.args,l=o.getHooks(),n.next=5,l.deployDag.call(u,function(){var E=g()(r()().mark(function y(w){var S,O;return r()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return S=w.commandService,O=w.deployDagService,h.next=3,S.executeCommand(e.Gv.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(){var b=g()(r()().mark(function N(C,G){return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,O(C,G);case 2:case"end":return A.stop()}},N)}));function m(N,C){return b.apply(this,arguments)}return m}()});case 3:return h.abrupt("return",{success:!0});case 4:case"end":return h.stop()}},y)}));return function(y){return E.apply(this,arguments)}}());case 5:return p=n.sent,o.setResult(p),n.abrupt("return",a);case 8:case"end":return n.stop()}},i)}))),K()(this,"undo",g()(r()().mark(function i(){var o;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a.isUndoable()&&(o=a.contextProvider(),o.undo()),u.abrupt("return",a);case 2:case"end":return u.stop()}},i)}))),K()(this,"redo",g()(r()().mark(function i(){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.isUndoable()){t.next=3;break}return t.next=3,a.execute();case 3:return t.abrupt("return",a);case 4:case"end":return t.stop()}},i)})))}return le()(c,[{key:"isUndoable",value:function(){var i=this.contextProvider();return i.isUndoable()}}]),c}(),Ve=pe()(Se.prototype,"contextProvider",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se))||je),we=v(71257),We=v(99543),ze=v(4107),Je=v(50146),Ie,Ke,se,de,ue,Qe;(function(c){var a=c.command=I.SHOW_RENAME_MODAL,i=c.hookKey="renameNode"})(Qe||(Qe={}));var ar=(Ie=e.Nf.injectable(),Ke=e.Nf.inject(e.KV),Ie(se=(de=function(){function c(){var a=this;q()(this,c),Q()(this,"contextProvider",ue,this),K()(this,"execute",g()(r()().mark(function i(){var o,t,u,l,p,f;return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return o=a.contextProvider(),t=o.getArgs(),u=t.args,l=t.hooks,p=o.getHooks(),E.next=5,p.renameNode.call(u,function(){var y=g()(r()().mark(function w(S){var O,x,h,b,m,N,C,G,D,A,Y;return r()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return O=S.nodeConfig,x=S.graphMeta,h=S.commandService,b=S.modelService,m=S.updateNodeNameService,N=O.label,C=function(){return{graphMeta:x,commandService:h,modelService:b,updateNodeNameService:m}},ae.next=5,o.getX6Graph();case 5:if(G=ae.sent,D=G.getCellById(O.id),!(!D||!D.isNode())){ae.next=9;break}throw new Error("".concat(O.id," is not a valid node"));case 9:return ae.next=11,tr(O,C);case 11:if(A=ae.sent,!A){ae.next=16;break}return Y=D.getData(),D.setData(s()(s()({},Y),{},{label:A})),ae.abrupt("return",{err:null,preNodeName:N,currentNodeName:A});case 16:return ae.abrupt("return",{err:null,preNodeName:N,currentNodeName:""});case 17:case"end":return ae.stop()}},w)}));return function(w){return y.apply(this,arguments)}}());case 5:return f=E.sent,o.setResult(f),E.abrupt("return",a);case 8:case"end":return E.stop()}},i)}))),K()(this,"undo",g()(r()().mark(function i(){var o;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a.isUndoable()&&(o=a.contextProvider(),o.undo()),u.abrupt("return",a);case 2:case"end":return u.stop()}},i)}))),K()(this,"redo",g()(r()().mark(function i(){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.isUndoable()){t.next=3;break}return t.next=3,a.execute();case 3:return t.abrupt("return",a);case 4:case"end":return t.stop()}},i)})))}return le()(c,[{key:"isUndoable",value:function(){var i=this.contextProvider();return i.isUndoable()}}]),c}(),ue=pe()(de.prototype,"contextProvider",[Ke],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de))||se),nr={labelCol:{span:5},wrapperCol:{span:19}};function tr(c,a){var i=new e.BH,o=le()(function n(){q()(this,n)});K()(o,"modal",void 0),K()(o,"form",void 0);var t=function(){var n=g()(r()().mark(function E(){var y,w,S,O,x,h,b,m,N,C;return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return y=o.form,w=o.modal,S=a(),O=S.updateNodeNameService,x=S.graphMeta,D.prev=3,w.update({okButtonProps:{loading:!0}}),D.next=7,y.validateFields();case 7:return D.next=9,y.getFieldsValue();case 9:if(h=D.sent,b=h.newNodeName,!O){D.next=20;break}return D.next=14,O(b,c,x);case 14:if(m=D.sent,N=m.err,C=m.nodeName,!N){D.next=19;break}throw new Error(N);case 19:i.resolve(C);case 20:u(),D.next=27;break;case 23:D.prev=23,D.t0=D.catch(3),console.error(D.t0),w.update({okButtonProps:{loading:!1}});case 27:case"end":return D.stop()}},E,null,[[3,23]])}));return function(){return n.apply(this,arguments)}}(),u=function(){f.destroy(),o.form=null,o.modal=null,p.destroy()},l=function(){var E=we.Z.useForm(),y=W()(E,1),w=y[0];return o.form=w,(0,T.jsx)("div",{children:(0,T.jsx)(We.ZP,{children:(0,T.jsx)(we.Z,s()(s()({form:w},nr),{},{initialValues:{newNodeName:c.label},children:(0,T.jsx)(we.Z.Item,{name:"newNodeName",label:"\u8282\u70B9\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u8282\u70B9\u540D"},{min:2,message:"\u8282\u70B9\u540D\u4E0D\u80FD\u5C11\u4E8E2\u4E2A\u5B57\u7B26"}],children:(0,T.jsx)(ze.Z,{})})}))})})},p=ir(),f=Je.Z.confirm({title:"\u91CD\u547D\u540D",content:(0,T.jsx)(l,{}),getContainer:function(){return p.element},okButtonProps:{onClick:function(E){E.stopPropagation(),t()}},onCancel:function(){u()},afterClose:function(){u()}});return o.modal=f,i.promise}var ir=function(){var a=document.createElement("div");return a.classList.add("xflow-modal-container"),window.document.body.append(a),{element:a,destroy:function(){window.document.body.removeChild(a)}}},lr=[s()(s()({},Ce),{},{CommandHandler:Xe}),s()(s()({},be),{},{CommandHandler:He}),s()(s()({},Qe),{},{CommandHandler:ar})],or=(0,e.s4)(function(c){c.setCommandContributions(function(){return lr}),c.setRegisterHookFn(function(a){var i=[a.graphMeta.registerHook({name:"get graph meta from backend",handler:function(){var t=g()(r()().mark(function l(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:p.graphMetaService=M.queryGraphMeta;case 1:case"end":return n.stop()}},l)}));function u(l){return t.apply(this,arguments)}return u}()}),a.saveGraphData.registerHook({name:"save graph data",handler:function(){var t=g()(r()().mark(function l(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:p.saveGraphDataService||(p.saveGraphDataService=M.saveGraphData);case 1:case"end":return n.stop()}},l)}));function u(l){return t.apply(this,arguments)}return u}()}),a.addNode.registerHook({name:"get node config from backend api",handler:function(){var t=g()(r()().mark(function l(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:p.createNodeService=M.addNode;case 1:case"end":return n.stop()}},l)}));function u(l){return t.apply(this,arguments)}return u}()}),a.delNode.registerHook({name:"get edge config from backend api",handler:function(){var t=g()(r()().mark(function l(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:p.deleteNodeService=M.delNode;case 1:case"end":return n.stop()}},l)}));function u(l){return t.apply(this,arguments)}return u}()}),a.addEdge.registerHook({name:"get edge config from backend api",handler:function(){var t=g()(r()().mark(function l(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:p.createEdgeService=M.addEdge,p.edgeConfig=s()(s()({},p.edgeConfig),{},{connector:{name:"rounded"},router:{name:"manhattan"}});case 2:case"end":return n.stop()}},l)}));function u(l){return t.apply(this,arguments)}return u}()}),a.delEdge.registerHook({name:"get edge config from backend api",handler:function(){var t=g()(r()().mark(function l(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:p.deleteEdgeService=M.delEdge;case 1:case"end":return n.stop()}},l)}));function u(l){return t.apply(this,arguments)}return u}()})],o=new e.K4;return o.pushAll(i),o})}),er=function(a){a.executeCommandPipeline([{commandId:e.Gv.LOAD_DATA.id,getCommandOption:function(){var i=g()(r()().mark(function t(){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{args:{loadDataService:M.loadGraphData}});case 1:case"end":return l.stop()}},t)}));function o(){return i.apply(this,arguments)}return o}()},{commandId:e.Gv.GRAPH_LAYOUT.id,getCommandOption:function(){var i=g()(r()().mark(function t(u){var l,p;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return l=u.getResult(),p=l.graphData,n.abrupt("return",{args:{layoutType:"dagre",layoutOptions:{type:"dagre",rankdir:"TB",nodesep:60,ranksep:30},graphData:p}});case 2:case"end":return n.stop()}},t)}));function o(t){return i.apply(this,arguments)}return o}()},{commandId:e.Gv.GRAPH_RENDER.id,getCommandOption:function(){var i=g()(r()().mark(function t(u){var l,p;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return l=u.getResult(),p=l.graphData,n.abrupt("return",{args:{graphData:p}});case 2:case"end":return n.stop()}},t)}));function o(t){return i.apply(this,arguments)}return o}()},{commandId:e.Gv.GRAPH_ZOOM.id,getCommandOption:function(){var i=g()(r()().mark(function t(){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{args:{factor:"fit",zoomOptions:{maxScale:.9}}});case 1:case"end":return l.stop()}},t)}));function o(){return i.apply(this,arguments)}return o}()}])},qe;(function(c){var a=c.id="test"})(qe||(qe={}));var ur=(0,e.HJ)(function(c){c.registerModel(function(a){return a.registerModel({id:qe.id,getInitialValue:function(){e:;}})})}),Mr=null,cr=v(73171),sr=v(8212),rr=v(15360),ve;(function(c){e.ko.set("DeleteOutlined",cr.Z),e.ko.set("EditOutlined",sr.Z),e.ko.set("StopOutlined",rr.Z);var a=c.DELETE_EDGE={id:e.$b.DEL_EDGE.id,label:"\u5220\u9664\u8FB9",iconName:"DeleteOutlined",onClick:function(){var l=g()(r()().mark(function f(n){var E,y;return r()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:E=n.target,y=n.commandService,y.executeCommand(e.$b.DEL_EDGE.id,{edgeConfig:E.data});case 2:case"end":return S.stop()}},f)}));function p(f){return l.apply(this,arguments)}return p}()},i=c.DELETE_NODE={id:e.cE.DEL_NODE.id,label:"\u5220\u9664\u8282\u70B9",iconName:"DeleteOutlined",onClick:function(){var l=g()(r()().mark(function f(n){var E,y;return r()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:E=n.target,y=n.commandService,y.executeCommand(e.cE.DEL_NODE.id,{nodeConfig:{id:E.data.id}});case 2:case"end":return S.stop()}},f)}));function p(f){return l.apply(this,arguments)}return p}()},o=c.EMPTY_MENU={id:"EMPTY_MENU_ITEM",label:"\u6682\u65E0\u53EF\u7528",isEnabled:!1,iconName:"DeleteOutlined"},t=c.RENAME_NODE={id:I.SHOW_RENAME_MODAL.id,label:"\u91CD\u547D\u540D",isVisible:!0,iconName:"EditOutlined",onClick:function(){var l=g()(r()().mark(function f(n){var E,y,w;return r()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:E=n.target,y=n.commandService,w=E.data,y.executeCommand(I.SHOW_RENAME_MODAL.id,{nodeConfig:w,updateNodeNameService:M.renameNode});case 3:case"end":return O.stop()}},f)}));function p(f){return l.apply(this,arguments)}return p}()},u=c.SEPARATOR={id:"separator",type:e.UI.Separator}})(ve||(ve={}));var dr=(0,e.Kd)(function(c){c.setMenuModelService(function(){var a=g()(r()().mark(function i(o,t,u,l){var p,f;return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:p=o.type,f=o.cell,console.log(p),E.t0=p,E.next=E.t0==="node"?5:E.t0==="edge"?7:E.t0==="blank"?9:11;break;case 5:return t.setValue({id:"root",type:e.UI.Root,submenu:[ve.DELETE_NODE,ve.RENAME_NODE]}),E.abrupt("break",13);case 7:return t.setValue({id:"root",type:e.UI.Root,submenu:[ve.DELETE_EDGE]}),E.abrupt("break",13);case 9:return t.setValue({id:"root",type:e.UI.Root,submenu:[ve.EMPTY_MENU]}),E.abrupt("break",13);case 11:return t.setValue({id:"root",type:e.UI.Root,submenu:[ve.EMPTY_MENU]}),E.abrupt("break",13);case 13:case"end":return E.stop()}},i)}));return function(i,o,t,u){return a.apply(this,arguments)}}())}),pr=v(92104),vr=v(97254),fr=v(18094),mr=v(36371),hr=v(50827),gr=v(54034),yr=v(24565),$e;(function(c){e.ko.set("SaveOutlined",pr.Z),e.ko.set("CloudSyncOutlined",vr.Z),e.ko.set("GatewayOutlined",fr.Z),e.ko.set("GroupOutlined",mr.Z),e.ko.set("UngroupOutlined",hr.Z),e.ko.set("PlaySquareOutlined",gr.Z),e.ko.set("StopOutlined",rr.Z);var a=c.getDependencies=function(){var t=g()(r()().mark(function u(l){return r()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,e.dX.SELECTED_CELLS.getModel(l);case 2:return f.t0=f.sent,f.next=5,e.dX.GRAPH_ENABLE_MULTI_SELECT.getModel(l);case 5:return f.t1=f.sent,f.next=8,e.yc.MODEL.getModel(l);case 8:return f.t2=f.sent,f.abrupt("return",[f.t0,f.t1,f.t2]);case 10:case"end":return f.stop()}},u)}));return function(u){return t.apply(this,arguments)}}(),i=c.getToolbarState=function(){var t=g()(r()().mark(function u(l){var p,f,n,E,y;return r()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,e.dX.GRAPH_ENABLE_MULTI_SELECT.useValue(l);case 2:return p=S.sent,f=p.isEnable,S.next=6,e.dX.IS_GROUP_SELECTED.useValue(l);case 6:return n=S.sent,S.next=9,e.dX.IS_NORMAL_NODES_SELECTED.useValue(l);case 9:return E=S.sent,S.next=12,e.yc.MODEL.useValue(l);case 12:return y=S.sent,S.abrupt("return",{isNodeSelected:E,isGroupSelected:n,isMultiSelectionActive:f,isProcessing:y.graphStatus===e.yc.StatusEnum.PROCESSING});case 14:case"end":return S.stop()}},u)}));return function(u){return t.apply(this,arguments)}}(),o=c.getToolbarItems=function(){var t=g()(r()().mark(function u(l,p){var f,n,E,y;return r()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return f=[],n=[],E=[],y=[],f.push({id:e.Gv.SAVE_GRAPH_DATA.id,iconName:"SaveOutlined",tooltip:"\u4FDD\u5B58\u6570\u636E",onClick:function(){var O=g()(r()().mark(function h(b){var m;return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:m=b.commandService,m.executeCommand(e.Gv.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(D,A){return M.saveGraphData(D,A)}});case 2:case"end":return C.stop()}},h)}));function x(h){return O.apply(this,arguments)}return x}()}),f.push({iconName:"CloudSyncOutlined",tooltip:"\u90E8\u7F72\u670D\u52A1",id:I.DEPLOY_SERVICE.id,onClick:function(x){var h=x.commandService;h.executeCommand(I.DEPLOY_SERVICE.id,{deployDagService:function(m,N){return M.deployDagService(m,N)}})}}),n.push({id:e.Gv.GRAPH_TOGGLE_MULTI_SELECT.id,tooltip:"\u5F00\u542F\u6846\u9009",iconName:"GatewayOutlined",active:l.isMultiSelectionActive,onClick:function(){var O=g()(r()().mark(function h(b){var m;return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:m=b.commandService,m.executeCommand(e.Gv.GRAPH_TOGGLE_MULTI_SELECT.id,{});case 2:case"end":return C.stop()}},h)}));function x(h){return O.apply(this,arguments)}return x}()}),n.push({id:e.dV.ADD_GROUP.id,tooltip:"\u65B0\u5EFA\u7FA4\u7EC4",iconName:"GroupOutlined",isEnabled:l.isNodeSelected,onClick:function(){var O=g()(r()().mark(function h(b){var m,N,C,G;return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return m=b.commandService,N=b.modelService,A.next=3,e.dX.SELECTED_CELLS.useValue(N);case 3:C=A.sent,G=C.map(function(Y){return Y.id}),m.executeCommand(e.dV.ADD_GROUP.id,{nodeConfig:{id:(0,e.k$)(),renderKey:j,groupChildren:G,groupCollapsedSize:{width:200,height:40},label:"\u65B0\u5EFA\u7FA4\u7EC4"}});case 6:case"end":return A.stop()}},h)}));function x(h){return O.apply(this,arguments)}return x}()}),n.push({id:e.dV.DEL_GROUP.id,tooltip:"\u89E3\u6563\u7FA4\u7EC4",iconName:"UngroupOutlined",isEnabled:l.isGroupSelected,onClick:function(){var O=g()(r()().mark(function h(b){var m,N,C,G;return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return m=b.commandService,N=b.modelService,A.next=3,e.dX.SELECTED_NODE.useValue(N);case 3:C=A.sent,G=C.getData(),m.executeCommand(e.dV.DEL_GROUP.id,{nodeConfig:G});case 6:case"end":return A.stop()}},h)}));function x(h){return O.apply(this,arguments)}return x}()}),E.push({id:e.ho.QUERY_GRAPH_STATUS.id+"play",tooltip:"\u5F00\u59CB\u6267\u884C",iconName:"PlaySquareOutlined",isEnabled:!l.isProcessing,onClick:function(){var O=g()(r()().mark(function h(b){var m;return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:m=b.commandService,m.executeCommand(e.ho.QUERY_GRAPH_STATUS.id,{graphStatusService:M.graphStatusService,loopInterval:3e3});case 2:case"end":return C.stop()}},h)}));function x(h){return O.apply(this,arguments)}return x}()}),E.push({id:e.ho.QUERY_GRAPH_STATUS.id+"stop",tooltip:"\u505C\u6B62\u6267\u884C",iconName:"StopOutlined",isEnabled:l.isProcessing,onClick:function(){var O=g()(r()().mark(function h(b){var m;return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:m=b.commandService,m.executeCommand(e.ho.QUERY_GRAPH_STATUS.id,{graphStatusService:M.stopGraphStatusService,loopInterval:5e3});case 2:case"end":return C.stop()}},h)}));function x(h){return O.apply(this,arguments)}return x}(),render:function(x){return(0,T.jsx)(yr.Z,{title:"\u786E\u5B9A\u505C\u6B62\u6267\u884C\uFF1F",onConfirm:function(){x.onClick()},children:x.children})}}),y.push({id:e.ho.QUERY_GRAPH_STATUS.id+"title",text:p,tooltip:p}),S.abrupt("return",[{name:"graphData",items:f},{name:"groupOperations",items:n},{name:"customCmd",items:E},{name:"customTitle",items:y}]);case 13:case"end":return S.stop()}},u)}));return function(u,l){return t.apply(this,arguments)}}()})($e||($e={}));var Er=(0,e.iR)(function(c,a){var i=a.getValue();c.setToolbarModelService(function(){var o=g()(r()().mark(function t(u,l,p){var f,n,E;return r()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return f=function(){var S=g()(r()().mark(function O(){var x,h;return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,$e.getToolbarState(l);case 2:return x=m.sent,m.next=5,$e.getToolbarItems(x,i.meta.name);case 5:h=m.sent,u.setValue(function(N){N.mainGroups=h});case 7:case"end":return m.stop()}},O)}));return function(){return S.apply(this,arguments)}}(),w.next=3,$e.getDependencies(l);case 3:n=w.sent,E=n.map(function(S){return S.watch(g()(r()().mark(function O(){return r()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:f();case 1:case"end":return h.stop()}},O)})))}),p.pushAll(E);case 6:case"end":return w.stop()}},t)}));return function(t,u,l){return o.apply(this,arguments)}}())}),Cr=(0,e.zg)(function(c){c.setKeybindingFunc(function(a){return a.registerKeybinding([{id:"delete node or edge",keybinding:"backspace",callback:function(){var i=g()(r()().mark(function t(u,l,p,f){var n;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,e.dX.SELECTED_CELLS.useValue(l);case 2:return n=y.sent,y.next=5,Promise.all(n.map(function(w){if(w.isEdge())return p.executeCommand(e.$b.DEL_EDGE.id,{edgeConfig:s()(s()({},w.getData()),{},{id:w.id})})}));case 5:return y.next=7,Promise.all(n.map(function(w){if(w.isNode())return p.executeCommand(e.cE.DEL_NODE.id,{nodeConfig:s()(s()({},w.getData()),{},{id:w.id})})}));case 7:case"end":return y.stop()}},t)}));function o(t,u,l,p){return i.apply(this,arguments)}return o}()},{id:"copy",keybinding:["command+c","ctrl+c"],callback:function(){var i=g()(r()().mark(function t(u,l,p,f){return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:f.preventDefault(),console.log(u),p.executeCommand(e.Gv.GRAPH_COPY.id,{});case 3:case"end":return E.stop()}},t)}));function o(t,u,l,p){return i.apply(this,arguments)}return o}()},{id:"paste",keybinding:["command+v","ctrl+v"],callback:function(){var i=g()(r()().mark(function t(u,l,p,f){return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:f.preventDefault(),p.executeCommand(e.Gv.GRAPH_PASTE.id,{});case 2:case"end":return E.stop()}},t)}));function o(t,u,l,p){return i.apply(this,arguments)}return o}()}])})}),Sr=v(91894),br=function(){var c=g()(r()().mark(function a(i,o,t){var u;return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:u={nodeConfig:s()(s()({},i),{},{id:(0,e.k$)()})},o.executeCommand(e.cE.ADD_NODE.id,u);case 2:case"end":return p.stop()}},a)}));return function(i,o,t){return c.apply(this,arguments)}}(),wr=function(a){return(0,T.jsxs)(Sr.Z,{size:"small",title:"\u7EC4\u4EF6\u4ECB\u7ECD",style:{width:"200px"},bordered:!1,children:[a.name,"\uFF1A \u8BBE\u7F6E\u670D\u52A1\u70ED\u7EBF\u6B22\u8BED"]})},Nr=function(){var c=g()(r()().mark(function a(i,o){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return console.log(i,o),u.abrupt("return",[{id:"\u5F00\u59CB",header:"\u5F00\u59CB",children:[{id:"2",label:"\u6B22\u8FCE\u8BED",parentId:"1",renderKey:X,popoverContent:(0,T.jsx)(wr,{name:"\u6B22\u8FCE\u8BED"}),attrs:{attribute:{type:"welcome"}},ports:[{type:e.Ak.AnchorType.INPUT,group:e.Ak.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u6869TOP"},{type:e.Ak.AnchorType.OUTPUT,group:e.Ak.AnchorGroup.LEFT,tooltip:"\u8F93\u51FA\u6869LEFT"},{type:e.Ak.AnchorType.OUTPUT,group:e.Ak.AnchorGroup.BOTTOM,tooltip:"\u8F93\u51FA\u6869BOTTOM"},{type:e.Ak.AnchorType.OUTPUT,group:e.Ak.AnchorGroup.RIGHT,tooltip:"\u8F93\u51FA\u6869RIGHT"}]}]},{id:"\u6D41\u8F6C\u8282\u70B9",header:"\u6D41\u8F6C\u8282\u70B9",children:[{id:"4",label:"\u6570\u636E",parentId:"2",renderKey:X,attrs:{attribute:{type:"data"}},ports:[{type:e.Ak.AnchorType.INPUT,group:e.Ak.AnchorGroup.LEFT,tooltip:"\u8F93\u5165\u6869LEFT"},{type:e.Ak.AnchorType.INPUT,group:e.Ak.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u6869TOP"},{type:e.Ak.AnchorType.INPUT,group:e.Ak.AnchorGroup.RIGHT,tooltip:"\u8F93\u5165\u6869RIGHT"},{type:e.Ak.AnchorType.OUTPUT,group:e.Ak.AnchorGroup.BOTTOM,tooltip:"\u8F93\u51FA\u6869BOTTOM"}]}]},{id:"\u7ED3\u675F",header:"\u7ED3\u675F",children:[{id:"6",label:"\u6302\u673A",parentId:"5",renderKey:X,attrs:{attribute:{type:"hangup"}},ports:[{type:e.Ak.AnchorType.INPUT,group:e.Ak.AnchorGroup.LEFT,tooltip:"\u8F93\u5165\u6869-LEFT"},{type:e.Ak.AnchorType.INPUT,group:e.Ak.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u6869-TOP1"},{type:e.Ak.AnchorType.INPUT,group:e.Ak.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u6869TOP2-2"},{type:e.Ak.AnchorType.INPUT,group:e.Ak.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u6869TOP2-3"},{type:e.Ak.AnchorType.INPUT,group:e.Ak.AnchorGroup.RIGHT,tooltip:"\u8F93\u5165\u6869-RIGHT"}]}]}]);case 2:case"end":return u.stop()}},a)}));return function(i,o){return c.apply(this,arguments)}}(),Or=function(){var c=g()(r()().mark(function a(){var i,o,t,u=arguments;return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return i=u.length>0&&u[0]!==void 0?u[0]:[],o=u.length>1?u[1]:void 0,t=i.filter(function(f){return f.label.includes(o)}),console.log(t,o,i),p.abrupt("return",t);case 5:case"end":return p.stop()}},a)}));return function(){return c.apply(this,arguments)}}(),Tr=function(a){var i=a.controlSchema,o=i.required,t=i.tooltip,u=i.extra,l=i.name,p=i.label,f=i.placeholder;return(0,T.jsx)(e.Gn,{schema:i,children:function(E){var y=E.disabled,w=E.hidden,S=E.initialValue;return(0,T.jsx)(we.Z.Item,{name:l,label:p,initialValue:S,tooltip:t,extra:u,required:o,hidden:w,children:(0,T.jsx)(Dr,{controlSchema:i,placeholder:f,disabled:y})})}})},Dr=function(a){var i=a.placeholder,o=a.disabled,t=a.onChange,u=a.value,l=(0,e.XZ)(),p=l.commandService,f=l.modelService;return $.useEffect(function(){p.executeCommand(e.Gv.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(){var n=g()(r()().mark(function y(w,S){var O;return r()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,e.dX.SELECTED_NODES.useValue(f);case 2:return O=h.sent,console.log(S),t(JSON.stringify(S)),h.abrupt("return",{err:null,data:S,meta:w});case 6:case"end":return h.stop()}},y)}));function E(y,w){return n.apply(this,arguments)}return E}()})}),(0,T.jsx)(ze.Z.TextArea,{value:u,placeholder:i,disabled:o,rows:10})},Pr=function(a){var i=a.controlSchema;return(0,T.jsx)("div",{style:{padding:"8px 0px",marginBottom:"8px"},children:(0,T.jsx)("a",{href:i.value,target:"_blank",style:{color:"#3057e3"},children:i.label})})},Le;(function(c){c.EDITOR="EDITOR",c.LINKSHAPE="LINKSHAPE"})(Le||(Le={}));var Ar=function(a){return a.set(Le.EDITOR,Tr),a.set(Le.LINKSHAPE,Pr),a};function kr(c){return new Promise(function(a){return setTimeout(function(){return a(!0)},c)})}var xr=0,Gr=function(){var c=g()(r()().mark(function a(i){var o,t,u,l,p;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=i.targetData,t=i.modelService,u=i.targetType,n.next=3,e.dX.GRAPH_META.useValue(t);case 3:if(l=n.sent,console.log("formSchemaService",l,i),console.log("--formSchema name = ",l.meta.name),u!=="canvas"){n.next=8;break}return n.abrupt("return",{tabs:[{name:"\u9879\u76EE",groups:[{name:"groupName",controls:[{name:"Tab2-1",label:"\u9879\u76EE\u540D",shape:"Input",disabled:!0,required:!0,tooltip:"\u56FE\u7684\u4E1A\u52A1\u9879\u76EE\u540D",extra:"\u548C\u56FE\u7684ID\u5BF9\u5E94",placeholder:"please write something",value:l.meta.name,defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}}]}]}]});case 8:return p={tabs:[{name:"Tab1",groups:[{name:"groupName",controls:[{label:"GraphEditor",name:"Tab1-0",shape:Le.EDITOR,disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"Tab1-2",name:"Tab1-2",shape:"Input",disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"Tab1-3",name:"Tab1-3",shape:"Input",disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"Tab1-4",name:"Tab1-4",shape:"Input",disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}}]}]},{name:"Tab2",groups:[{name:"groupName",controls:[{name:"Tab2-1",label:"Tab2-1",shape:"Input",disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"Tab2-2",name:"Tab2-2",shape:"Input",disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"Tab2-3",name:"Tab2-3",shape:"Input",disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}}]}]}]},n.next=11,kr(100);case 11:if(!o){n.next=13;break}return n.abrupt("return",p);case 13:n.next=16;break;case 16:if(!o){n.next=18;break}return n.abrupt("return",p);case 18:return n.abrupt("return",{tabs:[]});case 19:case"end":return n.stop()}},a)}));return function(i){return c.apply(this,arguments)}}(),Rr=function(){var c=g()(r()().mark(function a(i){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("formValueUpdateService",i);case 1:case"end":return t.stop()}},a)}));return function(i){return c.apply(this,arguments)}}(),Ur=v(70781),Ir=v(9459),_e=function(a){var i=a.meta,o=k(a),t=Er(a),u=dr(),l=or(),p=ur(),f=Cr(),n=$.useMemo(function(){return{app:null}},[]),E=function(){var w=g()(r()().mark(function S(O){return r()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:n.app=O,er(n.app);case 2:case"end":return h.stop()}},S)}));return function(O){return w.apply(this,arguments)}}(),y=(0,Ir.useLocation)();return $.useEffect(function(){console.log(">>>>>>>>>>>>>>props.useLocation=",y),a.meta.flowId=y.state.flowId,a.meta.name=y.state.name,n.app&&er(n.app)},[n.app,i]),(0,T.jsxs)(e.g,{className:"dag-user-custom-clz",hookConfig:o,modelServiceConfig:p,commandConfig:l,onLoad:E,meta:i,children:[(0,T.jsx)(e.ce,{}),(0,T.jsx)(e.zl,{className:"xflow-node-panel",searchService:Or,nodeDataService:Nr,onNodeDrop:br,position:{width:230,top:0,bottom:0,left:0},footerPosition:{height:0},bodyPosition:{top:40,bottom:0,left:0}}),(0,T.jsx)(e.xZ,{className:"xflow-workspace-toolbar-top",layout:"horizontal",config:t,position:{top:0,left:230,right:290,bottom:0}}),(0,T.jsxs)(e.n1,{position:{top:40,left:230,right:290,bottom:0},children:[(0,T.jsx)(e.It,{position:{top:12,right:12}}),(0,T.jsx)(e.g8,{config:u}),(0,T.jsx)(e.XS,{color:"#faad14"}),(0,T.jsx)(e.w5,{})]}),(0,T.jsx)(e.Ip,{controlMapService:Ar,formSchemaService:Gr,formValueUpdateService:Rr,bodyPosition:{top:0,bottom:0,right:0},position:{width:290,top:0,bottom:0,right:0},footerPosition:{height:0}}),(0,T.jsx)(e.G7,{config:f})]})},$r=_e;_e.defaultProps={meta:{flowId:"test-meta-flow-id"}}},91894:function(V,_,v){"use strict";v.d(_,{Z:function(){return xe}});var L=v(4942),r=v(87462),ie=v(94184),g=v.n(ie),$=v(98423),e=v(67294),X=v(53124),j=v(97647),fe=v(19586),me=v(51752),Ne=function(d,k){var R={};for(var s in d)Object.prototype.hasOwnProperty.call(d,s)&&k.indexOf(s)<0&&(R[s]=d[s]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,s=Object.getOwnPropertySymbols(d);P<s.length;P++)k.indexOf(s[P])<0&&Object.prototype.propertyIsEnumerable.call(d,s[P])&&(R[s[P]]=d[s[P]]);return R},Oe=function(k){var R=k.prefixCls,s=k.className,P=k.hoverable,W=P===void 0?!0:P,F=Ne(k,["prefixCls","className","hoverable"]);return e.createElement(X.C,null,function(ee){var H=ee.getPrefixCls,J=H("card",R),z=g()("".concat(J,"-grid"),s,(0,L.Z)({},"".concat(J,"-grid-hoverable"),W));return e.createElement("div",(0,r.Z)({},F,{className:z}))})},he=Oe,Te=function(d,k){var R={};for(var s in d)Object.prototype.hasOwnProperty.call(d,s)&&k.indexOf(s)<0&&(R[s]=d[s]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,s=Object.getOwnPropertySymbols(d);P<s.length;P++)k.indexOf(s[P])<0&&Object.prototype.propertyIsEnumerable.call(d,s[P])&&(R[s[P]]=d[s[P]]);return R};function De(d){var k=d.map(function(R,s){return e.createElement("li",{style:{width:"".concat(100/d.length,"%")},key:"action-".concat(s)},e.createElement("span",null,R))});return k}var Pe=e.forwardRef(function(d,k){var R,s,P=e.useContext(X.E_),W=P.getPrefixCls,F=P.direction,ee=e.useContext(j.Z),H=function(de){var ue;(ue=d.onTabChange)===null||ue===void 0||ue.call(d,de)},J=function(){var de;return e.Children.forEach(d.children,function(ue){ue&&ue.type&&ue.type===he&&(de=!0)}),de},z=d.prefixCls,M=d.className,ne=d.extra,Q=d.headStyle,te=Q===void 0?{}:Q,q=d.bodyStyle,re=q===void 0?{}:q,le=d.title,ye=d.loading,K=d.bordered,Ge=K===void 0?!0:K,pe=d.size,oe=d.type,I=d.cover,U=d.actions,B=d.tabList,Re=d.children,Ee=d.activeTabKey,Ue=d.defaultActiveTabKey,Fe=d.tabBarExtraContent,Ye=d.hoverable,Ce=d.tabProps,Xe=Ce===void 0?{}:Ce,Ze=Te(d,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),Z=W("card",z),je=e.createElement(fe.Z,{loading:!0,active:!0,paragraph:{rows:4},title:!1},Re),Se=Ee!==void 0,Ve=(0,r.Z)((0,r.Z)({},Xe),(R={},(0,L.Z)(R,Se?"activeKey":"defaultActiveKey",Se?Ee:Ue),(0,L.Z)(R,"tabBarExtraContent",Fe),R)),be,He=B&&B.length?e.createElement(me.Z,(0,r.Z)({size:"large"},Ve,{className:"".concat(Z,"-head-tabs"),onChange:H}),B.map(function(se){return e.createElement(me.Z.TabPane,{tab:se.tab,disabled:se.disabled,key:se.key})})):null;(le||ne||He)&&(be=e.createElement("div",{className:"".concat(Z,"-head"),style:te},e.createElement("div",{className:"".concat(Z,"-head-wrapper")},le&&e.createElement("div",{className:"".concat(Z,"-head-title")},le),ne&&e.createElement("div",{className:"".concat(Z,"-extra")},ne)),He));var we=I?e.createElement("div",{className:"".concat(Z,"-cover")},I):null,We=e.createElement("div",{className:"".concat(Z,"-body"),style:re},ye?je:Re),ze=U&&U.length?e.createElement("ul",{className:"".concat(Z,"-actions")},De(U)):null,Je=(0,$.Z)(Ze,["onTabChange"]),Ie=pe||ee,Ke=g()(Z,(s={},(0,L.Z)(s,"".concat(Z,"-loading"),ye),(0,L.Z)(s,"".concat(Z,"-bordered"),Ge),(0,L.Z)(s,"".concat(Z,"-hoverable"),Ye),(0,L.Z)(s,"".concat(Z,"-contain-grid"),J()),(0,L.Z)(s,"".concat(Z,"-contain-tabs"),B&&B.length),(0,L.Z)(s,"".concat(Z,"-").concat(Ie),Ie),(0,L.Z)(s,"".concat(Z,"-type-").concat(oe),!!oe),(0,L.Z)(s,"".concat(Z,"-rtl"),F==="rtl"),s),M);return e.createElement("div",(0,r.Z)({ref:k},Je,{className:Ke}),be,we,We,ze)}),T=Pe,Ae=function(d,k){var R={};for(var s in d)Object.prototype.hasOwnProperty.call(d,s)&&k.indexOf(s)<0&&(R[s]=d[s]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,s=Object.getOwnPropertySymbols(d);P<s.length;P++)k.indexOf(s[P])<0&&Object.prototype.propertyIsEnumerable.call(d,s[P])&&(R[s[P]]=d[s[P]]);return R},ge=function(k){return e.createElement(X.C,null,function(R){var s=R.getPrefixCls,P=k.prefixCls,W=k.className,F=k.avatar,ee=k.title,H=k.description,J=Ae(k,["prefixCls","className","avatar","title","description"]),z=s("card",P),M=g()("".concat(z,"-meta"),W),ne=F?e.createElement("div",{className:"".concat(z,"-meta-avatar")},F):null,Q=ee?e.createElement("div",{className:"".concat(z,"-meta-title")},ee):null,te=H?e.createElement("div",{className:"".concat(z,"-meta-description")},H):null,q=Q||te?e.createElement("div",{className:"".concat(z,"-meta-detail")},Q,te):null;return e.createElement("div",(0,r.Z)({},J,{className:M}),ne,q)})},ke=ge,ce=T;ce.Grid=he,ce.Meta=ke;var xe=ce},24565:function(V,_,v){"use strict";v.d(_,{Z:function(){return xe}});var L=v(87462),r=v(29439),ie=v(68855),g=v(94184),$=v.n(g),e=v(21770),X=v(15105),j=v(67294),fe=v(53124),me=v(55241),Ne=v(96159),Oe=v(71577),he=v(73839),Te=v(86743),De=v(42051),Pe=v(85636),T=v(81643);function Ae(d){var k=d.prefixCls,R=d.okButtonProps,s=d.cancelButtonProps,P=d.title,W=d.cancelText,F=d.okText,ee=d.okType,H=d.icon,J=d.showCancel,z=J===void 0?!0:J,M=d.close,ne=d.onConfirm,Q=d.onCancel,te=j.useContext(fe.E_),q=te.getPrefixCls;return j.createElement(De.Z,{componentName:"Popconfirm",defaultLocale:Pe.Z.Popconfirm},function(re){return j.createElement("div",{className:"".concat(k,"-inner-content")},j.createElement("div",{className:"".concat(k,"-message")},H,j.createElement("div",{className:"".concat(k,"-message-title")},(0,T.Z)(P))),j.createElement("div",{className:"".concat(k,"-buttons")},z&&j.createElement(Oe.Z,(0,L.Z)({onClick:Q,size:"small"},s),W||re.cancelText),j.createElement(Te.Z,{buttonProps:(0,L.Z)((0,L.Z)({size:"small"},(0,he.n)(ee)),R),actionFn:ne,close:M,prefixCls:q("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},F||re.okText)))})}var ge=void 0,ke=function(d,k){var R={};for(var s in d)Object.prototype.hasOwnProperty.call(d,s)&&k.indexOf(s)<0&&(R[s]=d[s]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,s=Object.getOwnPropertySymbols(d);P<s.length;P++)k.indexOf(s[P])<0&&Object.prototype.propertyIsEnumerable.call(d,s[P])&&(R[s[P]]=d[s[P]]);return R},ce=j.forwardRef(function(d,k){var R=j.useContext(fe.E_),s=R.getPrefixCls,P=(0,e.Z)(!1,{value:d.visible,defaultValue:d.defaultVisible}),W=(0,r.Z)(P,2),F=W[0],ee=W[1],H=function(I,U){var B;ee(I,!0),(B=d.onVisibleChange)===null||B===void 0||B.call(d,I,U)},J=function(I){H(!1,I)},z=function(I){var U;return(U=d.onConfirm)===null||U===void 0?void 0:U.call(ge,I)},M=function(I){var U;H(!1,I),(U=d.onCancel)===null||U===void 0||U.call(ge,I)},ne=function(I){I.keyCode===X.Z.ESC&&F&&H(!1,I)},Q=function(I){var U=d.disabled;U||H(I)},te=d.prefixCls,q=d.placement,re=d.children,le=d.overlayClassName,ye=ke(d,["prefixCls","placement","children","overlayClassName"]),K=s("popover",te),Ge=s("popconfirm",te),pe=$()(Ge,le);return j.createElement(me.Z,(0,L.Z)({},ye,{prefixCls:K,placement:q,onVisibleChange:Q,visible:F,_overlay:j.createElement(Ae,(0,L.Z)({},d,{prefixCls:K,close:J,onConfirm:z,onCancel:M})),overlayClassName:pe,ref:k}),(0,Ne.Tm)(re,{onKeyDown:function(I){var U,B;j.isValidElement(re)&&((B=re==null?void 0:(U=re.props).onKeyDown)===null||B===void 0||B.call(U,I)),ne(I)}}))});ce.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:j.createElement(ie.Z,null),disabled:!1};var xe=ce},46877:function(V){function _(v,L,r,ie,g){var $={};return Object.keys(ie).forEach(function(e){$[e]=ie[e]}),$.enumerable=!!$.enumerable,$.configurable=!!$.configurable,("value"in $||$.initializer)&&($.writable=!0),$=r.slice().reverse().reduce(function(e,X){return X(v,L,e)||e},$),g&&$.initializer!==void 0&&($.value=$.initializer?$.initializer.call(g):void 0,$.initializer=void 0),$.initializer===void 0&&(Object.defineProperty(v,L,$),$=null),$}V.exports=_,V.exports.__esModule=!0,V.exports.default=V.exports},14315:function(V){function _(v,L,r,ie){!r||Object.defineProperty(v,L,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(ie):void 0})}V.exports=_,V.exports.__esModule=!0,V.exports.default=V.exports},55827:function(V){function _(v,L){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}V.exports=_,V.exports.__esModule=!0,V.exports.default=V.exports}}]);
